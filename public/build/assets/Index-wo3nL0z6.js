import{d as k,c as _,o as n,w as c,a as e,e as i,f as x,g,j as U,k as j,v as z,m as N,t as r,F as C,h as M,n as f,b as D,u as m,S as p,Q as y}from"./app-BYXUr5O4.js";import{_ as O}from"./AdminLayout-Bu_yz3dO.js";const q={class:"space-y-6"},F={class:"bg-white rounded-lg shadow border border-gray-200 p-6"},Q={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},$={class:"relative"},A={class:"bg-white rounded-lg shadow border border-gray-200"},E={class:"px-6 py-4 border-b border-gray-200"},I={class:"text-lg font-medium text-gray-900"},J={class:"overflow-x-auto"},P={class:"min-w-full divide-y divide-gray-200"},G={class:"bg-white divide-y divide-gray-200"},K={class:"px-6 py-4 whitespace-nowrap"},R={class:"flex items-center"},W={class:"flex-shrink-0 h-10 w-10"},X=["src","alt"],Y={class:"ml-4"},Z={class:"text-sm font-medium text-gray-900"},ee={class:"text-sm text-gray-500"},te={class:"px-6 py-4 whitespace-nowrap"},se={class:"flex items-center"},oe={class:"text-sm text-gray-900"},re={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},le={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ne={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ie={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},ae={class:"flex justify-end space-x-2"},de=["onClick"],ue={key:0,class:"px-6 py-3 border-t border-gray-200"},ce={class:"flex items-center justify-between"},xe={class:"text-sm text-gray-700"},ge={class:"flex space-x-2"},fe=["innerHTML"],me={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},pe={class:"mt-3 text-center"},ye={class:"mt-2 px-7 py-3"},he={class:"text-sm text-gray-500"},ke={__name:"Index",props:{admin:{type:Object,required:!0},users:{type:Object,required:!0},filters:{type:Object,default:()=>({})}},setup(o){const S=o,d=k(!1),a=k(null),L=()=>{y.get(route("admin.users.index"),S.filters,{preserveState:!0,preserveScroll:!0})},B=()=>{y.get(route("admin.users.index"))},T=l=>{a.value=l,d.value=!0},u=()=>{d.value=!1,a.value=null},H=()=>{a.value&&y.delete(route("admin.users.destroy",a.value.id),{onSuccess:()=>{u()}})},V=l=>new Date(l).toLocaleDateString("ja-JP");return(l,t)=>(n(),_(O,{admin:o.admin},{default:c(()=>{var h;return[e("div",q,[e("div",{class:"flex justify-between items-center"},[t[3]||(t[3]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"ユーザー管理"),e("p",{class:"text-gray-600"},"システム内の全ユーザーを管理できます")],-1)),e("div",{class:"flex space-x-3"},[e("button",{onClick:B,class:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},t[2]||(t[2]=[e("svg",{class:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),g(" 更新 ")]))])]),e("div",F,[e("form",{onSubmit:U(L,["prevent"]),class:"space-y-4"},[e("div",Q,[e("div",null,[t[5]||(t[5]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"検索",-1)),e("div",$,[j(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>o.filters.search=s),type:"text",placeholder:"名前またはメールアドレス",class:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[z,o.filters.search]]),t[4]||(t[4]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1))])]),e("div",null,[t[7]||(t[7]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"オンライン状態",-1)),j(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>o.filters.online_status=s),class:"block w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},t[6]||(t[6]=[e("option",{value:""},"すべて",-1),e("option",{value:"online"},"オンライン",-1),e("option",{value:"offline"},"オフライン",-1)]),512),[[N,o.filters.online_status]])]),t[8]||(t[8]=e("div",{class:"flex items-end"},[e("button",{type:"submit",class:"w-full bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"}," 検索 ")],-1))])],32)]),e("div",A,[e("div",E,[e("h3",I," ユーザー一覧 ("+r(o.users.total)+"件) ",1)]),e("div",J,[e("table",P,[t[11]||(t[11]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," ユーザー "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," ステータス "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," チャンネル数 "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," メッセージ数 "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," 登録日 "),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," 操作 ")])],-1)),e("tbody",G,[(n(!0),i(C,null,M(o.users.data,s=>{var b,v,w;return n(),i("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",K,[e("div",R,[e("div",W,[e("img",{src:s.profile_photo_url,alt:s.name,class:"h-10 w-10 rounded-full"},null,8,X)]),e("div",Y,[e("div",Z,r(s.name),1),e("div",ee,r(s.email),1)])])]),e("td",te,[e("div",se,[e("div",{class:f(["h-2 w-2 rounded-full mr-2",(b=s.online_status)!=null&&b.online?"bg-green-400":"bg-gray-400"])},null,2),e("span",oe,r((v=s.online_status)!=null&&v.online?"オンライン":"オフライン"),1)])]),e("td",re,r(((w=s.channels)==null?void 0:w.length)||0),1),e("td",le,r(s.messages_count||0),1),e("td",ne,r(V(s.created_at)),1),e("td",ie,[e("div",ae,[D(m(p),{href:l.route("admin.users.show",s.id),class:"text-blue-600 hover:text-blue-900"},{default:c(()=>t[9]||(t[9]=[g(" 詳細 ")])),_:2,__:[9]},1032,["href"]),D(m(p),{href:l.route("admin.users.edit",s.id),class:"text-indigo-600 hover:text-indigo-900"},{default:c(()=>t[10]||(t[10]=[g(" 編集 ")])),_:2,__:[10]},1032,["href"]),e("button",{onClick:be=>T(s),class:"text-red-600 hover:text-red-900"}," 削除 ",8,de)])])])}),128))])])]),o.users.links?(n(),i("div",ue,[e("div",ce,[e("div",xe,r(o.users.from)+" - "+r(o.users.to)+" / "+r(o.users.total)+"件 ",1),e("div",ge,[l.link&&l.link.url?(n(!0),i(C,{key:0},M(o.users.links,s=>(n(),_(m(p),{key:s.label,href:s.url,class:f(["px-3 py-2 text-sm rounded-lg",s.active?"bg-blue-600 text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"]),innerHTML:s.label},null,8,["href","class","innerHTML"]))),128)):l.link?(n(),i("span",{key:1,class:f(["px-3 py-2 text-sm rounded-lg cursor-not-allowed","bg-gray-100 text-gray-400 border border-gray-200"]),innerHTML:l.link.label},null,8,fe)):x("",!0)])])])):x("",!0)])]),d.value?(n(),i("div",{key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",onClick:u},[e("div",me,[e("div",pe,[t[12]||(t[12]=e("div",{class:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100"},[e("svg",{class:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),t[13]||(t[13]=e("h3",{class:"text-lg font-medium text-gray-900 mt-4"},"ユーザーを削除",-1)),e("div",ye,[e("p",he," 「"+r((h=a.value)==null?void 0:h.name)+"」を削除しますか？この操作は取り消せません。 ",1)]),e("div",{class:"flex justify-center space-x-4 mt-4"},[e("button",{onClick:u,class:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400"}," キャンセル "),e("button",{onClick:H,class:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700"}," 削除 ")])])])])):x("",!0)]}),_:1},8,["admin"]))}};export{ke as default};
