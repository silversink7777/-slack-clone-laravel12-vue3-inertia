import{e as a,o as l,a as e,d as h,q as Y,A as G,b as k,f as b,u as E,t as x,z as V,Q as ce,j as z,k as D,v as P,C as X,c as de,w as q,D as ve,g as S,F,h as H,l as me,s as J,n as R,E as he}from"./app-BISfFdVM.js";import{_ as fe}from"./Modal-DP4yDZ7J.js";import{_ as W}from"./PrimaryButton-BSZ9oDNS.js";import{_ as pe}from"./SecondaryButton-D6Px5fpN.js";function ge(g,f){return l(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"})])}function bt(g,f){return l(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"})])}function kt(g,f){return l(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])}const xe={class:"w-20 bg-slack-purple-darker text-white p-2"},ye={key:0,class:"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center min-w-[20px]"},_t={__name:"WorkspaceSidebar",setup(g){const f=h(0);let w=null;const d=async()=>{try{const p=await V.get("/my-invitations");p.data&&Array.isArray(p.data)&&(f.value=p.data.length)}catch(p){console.error("Failed to fetch invitation count:",p),f.value=0}},v=()=>{w&&clearInterval(w),w=setInterval(d,3e4)},y=()=>{ce.visit("/invitations")};return Y(()=>{d(),v(),window.addEventListener("invitation-count-updated",d)}),G(()=>{w&&clearInterval(w),window.removeEventListener("invitation-count-updated",d)}),(p,r)=>(l(),a("div",xe,[r[0]||(r[0]=e("div",{class:"rounded-lg bg-white text-purple-900 w-12 h-12 flex items-center justify-center text-2xl font-bold mb-4"}," T ",-1)),e("button",{onClick:y,class:"relative w-12 h-12 rounded-lg hover:bg-purple-700 flex items-center justify-center mb-2 transition-colors",title:"招待通知"},[k(E(ge),{class:"h-6 w-6"}),f.value>0?(l(),a("div",ye,x(f.value>99?"99+":f.value),1)):b("",!0)])]))}};function K(g,f){return l(),a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M12.53 16.28a.75.75 0 0 1-1.06 0l-7.5-7.5a.75.75 0 0 1 1.06-1.06L12 14.69l6.97-6.97a.75.75 0 1 1 1.06 1.06l-7.5 7.5Z","clip-rule":"evenodd"})])}function we(g,f){return l(),a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M10.5 6a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Zm0 6a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Zm0 6a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Z","clip-rule":"evenodd"})])}function be(g,f){return l(),a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M11.097 1.515a.75.75 0 0 1 .589.882L10.666 7.5h4.47l1.079-5.397a.75.75 0 1 1 1.47.294L16.665 7.5h3.585a.75.75 0 0 1 0 1.5h-3.885l-1.2 6h3.585a.75.75 0 0 1 0 1.5h-3.885l-1.08 5.397a.75.75 0 1 1-1.47-.294l1.02-5.103h-4.47l-1.08 5.397a.75.75 0 1 1-1.47-.294l1.02-5.103H3.75a.75.75 0 0 1 0-1.5h3.885l1.2-6H5.25a.75.75 0 0 1 0-1.5h3.885l1.08-5.397a.75.75 0 0 1 .882-.588ZM10.365 9l-1.2 6h4.47l1.2-6h-4.47Z","clip-rule":"evenodd"})])}function ke(g,f){return l(),a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M12 3.75a.75.75 0 0 1 .75.75v6.75h6.75a.75.75 0 0 1 0 1.5h-6.75v6.75a.75.75 0 0 1-1.5 0v-6.75H4.5a.75.75 0 0 1 0-1.5h6.75V4.5a.75.75 0 0 1 .75-.75Z","clip-rule":"evenodd"})])}function _e(g,f){return l(),a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{d:"M5.25 6.375a4.125 4.125 0 1 1 8.25 0 4.125 4.125 0 0 1-8.25 0ZM2.25 19.125a7.125 7.125 0 0 1 14.25 0v.003l-.001.119a.75.75 0 0 1-.363.63 13.067 13.067 0 0 1-6.761 1.873c-2.472 0-4.786-.684-6.76-1.873a.75.75 0 0 1-.364-.63l-.001-.122ZM18.75 7.5a.75.75 0 0 0-1.5 0v2.25H15a.75.75 0 0 0 0 1.5h2.25v2.25a.75.75 0 0 0 1.5 0v-2.25H21a.75.75 0 0 0 0-1.5h-2.25V7.5Z"})])}const Ce={class:"bg-white rounded-lg p-6 w-full max-w-md"},$e={__name:"AddChannelModal",props:{show:Boolean},emits:["createChannel","close"],setup(g,{emit:f}){const w=f,d=h(""),v=()=>{d.value.trim()&&(w("createChannel",d.value.trim()),d.value="")},y=()=>{w("close")};return(p,r)=>g.show?(l(),a("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center",onClick:z(y,["self"])},[e("div",Ce,[r[3]||(r[3]=e("h2",{class:"text-lg font-bold mb-4"},"新しいチャンネルを作成する",-1)),e("form",{onSubmit:z(v,["prevent"])},[e("div",null,[r[1]||(r[1]=e("label",{for:"channel-name",class:"block text-sm font-medium text-gray-700"},"チャンネル名",-1)),D(e("input",{"onUpdate:modelValue":r[0]||(r[0]=$=>d.value=$),type:"text",id:"channel-name",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"# e.g. 新規プロジェクト",required:""},null,512),[[P,d.value]])]),e("div",{class:"mt-6 flex justify-end space-x-4"},[e("button",{type:"button",onClick:y,class:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300"}," キャンセル "),r[2]||(r[2]=e("button",{type:"submit",class:"px-4 py-2 bg-slack-purple-dark text-white rounded-md hover:bg-slack-purple-darker"}," 作成する ",-1))])],32)])])):b("",!0)}},Me={class:"p-6"},Se={class:"mb-6 p-4 bg-gray-50 rounded-lg"},je={class:"space-y-3"},Ae={class:"flex space-x-2"},Be={key:0,class:"space-y-2"},Ue={class:"block text-sm font-medium text-gray-700"},Le={class:"flex flex-wrap gap-2"},Te=["onClick"],Ee={class:"mb-4"},Ie={class:"space-y-2 max-h-60 overflow-y-auto"},Ve=["id","value"],Ne=["for"],Oe={class:"font-medium text-gray-900"},Fe={class:"text-sm text-gray-500"},He={key:0,class:"mb-4"},Ze={class:"block text-sm font-medium text-gray-700 mb-2"},qe={class:"flex flex-wrap gap-2"},ze=["onClick"],De={key:1,class:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded"},Re={key:2,class:"mb-4 p-3 bg-green-100 border border-green-400 text-green-700 rounded"},Ke={class:"flex justify-end space-x-3"},Xe={__name:"InviteUsersModal",props:{show:{type:Boolean,default:!1},channelId:{type:[String,Number],default:0},currentUsers:{type:Array,default:()=>[]}},emits:["close","invitations-sent"],setup(g,{emit:f}){const w=g,d=f,v=h([]),y=h([]),p=h(""),r=h([]),$=h(!1),m=h(""),_=h(""),B=async()=>{try{const i=await fetch("/users"),o=await i.json();i.ok?y.value=o.data.filter(u=>!w.currentUsers.some(A=>A.id===u.id)):m.value=o.message||"ユーザー一覧の取得に失敗しました"}catch(i){m.value="ユーザー一覧の取得に失敗しました",console.error("Load users error:",i)}},N=i=>{const o=y.value.find(u=>u.id===i);return o?o.name:"Unknown User"},M=i=>{v.value=v.value.filter(o=>o!==i)},L=()=>{const i=p.value.trim();if(!i)return;if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i)){m.value="有効なメールアドレスを入力してください";return}if(r.value.includes(i)){m.value="このメールアドレスは既に追加されています";return}if(y.value.find(T=>T.email===i)){m.value="このメールアドレスのユーザーは既に選択可能なユーザーリストに含まれています。ユーザーリストから選択してください。";return}if(v.value.map(T=>{const O=y.value.find(Z=>Z.id===T);return O?O.email:null}).filter(T=>T).includes(i)){m.value="このメールアドレスのユーザーは既に選択されています";return}r.value.push(i),p.value="",m.value=""},U=i=>{r.value.splice(i,1)},j=async()=>{if(!(v.value.length===0&&r.value.length===0)){$.value=!0,m.value="",_.value="";try{const i=await fetch(`/channels/${w.channelId}/invite`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify({user_ids:v.value,emails:r.value})}),o=await i.json();if(i.ok){const u=v.value.length+r.value.length;_.value=`${u}件の招待を送信しました`,v.value=[],r.value=[],d("invitations-sent",o),setTimeout(()=>{C()},2e3)}else m.value=o.message||"招待の送信に失敗しました"}catch(i){m.value="招待の送信に失敗しました",console.error("Invitation error:",i)}finally{$.value=!1}}},C=()=>{v.value=[],r.value=[],p.value="",m.value="",_.value="",d("close")};return X(()=>w.show,i=>{i&&(m.value="",_.value="",B())}),(i,o)=>(l(),de(fe,{show:g.show,onClose:C},{default:q(()=>[e("div",Me,[o[8]||(o[8]=e("h2",{class:"text-lg font-medium text-gray-900 mb-4"}," ユーザーを招待 ",-1)),e("div",Se,[o[3]||(o[3]=e("h3",{class:"text-md font-medium text-gray-900 mb-3"}," メールアドレスで招待 ",-1)),e("div",je,[e("div",Ae,[D(e("input",{"onUpdate:modelValue":o[0]||(o[0]=u=>p.value=u),type:"email",placeholder:"メールアドレスを入力",class:"flex-1 rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",onKeyup:ve(L,["enter"])},null,544),[[P,p.value]]),k(W,{onClick:L,disabled:!p.value.trim()||$.value,class:"px-4"},{default:q(()=>o[2]||(o[2]=[S(" 追加 ")])),_:1,__:[2]},8,["disabled"])]),r.value.length>0?(l(),a("div",Be,[e("label",Ue," 招待するメールアドレス ("+x(r.value.length)+"件) ",1),e("div",Le,[(l(!0),a(F,null,H(r.value,(u,A)=>(l(),a("span",{key:A,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},[S(x(u)+" ",1),e("button",{onClick:T=>U(A),class:"ml-1 inline-flex items-center justify-center w-4 h-4 rounded-full text-blue-400 hover:bg-blue-200 hover:text-blue-500"}," × ",8,Te)]))),128))])])):b("",!0)])]),e("div",Ee,[o[4]||(o[4]=e("h3",{class:"text-md font-medium text-gray-900 mb-3"}," 既存ユーザーを選択 ",-1)),o[5]||(o[5]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," 招待するユーザーを選択 ",-1)),e("div",Ie,[(l(!0),a(F,null,H(y.value,u=>(l(),a("div",{key:u.id,class:"flex items-center space-x-3 p-2 border rounded hover:bg-gray-50"},[D(e("input",{type:"checkbox",id:"user-"+u.id,value:u.id,"onUpdate:modelValue":o[1]||(o[1]=A=>v.value=A),class:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,8,Ve),[[me,v.value]]),e("label",{for:"user-"+u.id,class:"flex-1 cursor-pointer"},[e("div",Oe,x(u.name),1),e("div",Fe,x(u.email),1)],8,Ne)]))),128))])]),v.value.length>0?(l(),a("div",He,[e("label",Ze," 選択されたユーザー ("+x(v.value.length)+"人) ",1),e("div",qe,[(l(!0),a(F,null,H(v.value,u=>(l(),a("span",{key:u,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800"},[S(x(N(u))+" ",1),e("button",{onClick:A=>M(u),class:"ml-1 inline-flex items-center justify-center w-4 h-4 rounded-full text-indigo-400 hover:bg-indigo-200 hover:text-indigo-500"}," × ",8,ze)]))),128))])])):b("",!0),m.value?(l(),a("div",De,x(m.value),1)):b("",!0),_.value?(l(),a("div",Re,x(_.value),1)):b("",!0),e("div",Ke,[k(pe,{onClick:C},{default:q(()=>o[6]||(o[6]=[S(" キャンセル ")])),_:1,__:[6]}),k(W,{onClick:j,disabled:v.value.length===0&&r.value.length===0||$.value,loading:$.value},{default:q(()=>o[7]||(o[7]=[S(" 招待を送信 ")])),_:1,__:[7]},8,["disabled","loading"])])])]),_:1},8,["show"]))}},Pe={class:"w-64 bg-slack-purple-dark text-slack-purple-light flex flex-col"},Qe={class:"px-4 h-16 flex items-center justify-between font-bold text-white text-lg border-b border-purple-800"},Je={class:"flex items-center space-x-2"},We={class:"p-2"},Ye={class:"relative"},Ge={class:"flex-1 overflow-y-auto p-2"},et={class:"mb-4"},tt={class:"flex items-center justify-between px-2"},st={class:"text-sm font-bold flex items-center"},nt={key:0,class:"ml-2 text-xs text-gray-400"},lt=["onClick"],at=["innerHTML"],ot={key:1},rt={class:"flex items-center space-x-1"},it=["onClick","title"],ut=["onClick","title"],ct={key:0,class:"text-xs text-gray-400 px-2 py-1 flex items-center"},dt={key:1,class:"text-xs text-red-400 px-2 py-1"},vt={key:2,class:"text-xs text-gray-400 px-2 py-1"},mt={class:"mb-4"},ht={class:"text-sm font-bold px-2 flex items-center"},ft={class:"px-4 py-2 border-b border-gray-100"},pt={class:"font-medium text-gray-900"},Ct={__name:"ChannelListSidebar",props:{channels:Array,"direct-messages":Array,manualOffline:Boolean},emits:["selectChannel","newChannelAdded","toggleManualOffline","channelDeleted","channelLeft"],setup(g,{emit:f}){const w=g,d=J(()=>w.channels||[]),v=J(()=>w["direct-messages"]||[]),y=f,p=h(!1),r=h(!1),$=h(0),m=h({}),_=h(!1),B=h(null),N=h({x:0,y:0}),M=h(""),L=h(!1),U=h(""),j=h([...d.value]),C=h(!1),i=n=>{y("selectChannel",n)},o=async n=>{var s;try{const t=(s=document.head.querySelector('meta[name="csrf-token"]'))==null?void 0:s.content,c=await V.post("/channels",{name:n},{headers:t?{"X-CSRF-TOKEN":t}:{}});y("newChannelAdded",c.data),p.value=!1}catch(t){let c="チャンネル作成に失敗しました";t.response&&t.response.status===419?c="セッションの有効期限が切れています。ページを再読み込みしてください。":t.response&&t.response.data&&t.response.data.message&&(c=t.response.data.message),alert(c),console.error("Channel creation failed:",t)}},u=async n=>{var s;if(confirm("このチャンネルを削除しますか？この操作は取り消せません。"))try{const t=(s=document.head.querySelector('meta[name="csrf-token"]'))==null?void 0:s.content;await V.delete(`/channels/${n}`,{headers:t?{"X-CSRF-TOKEN":t}:{}}),y("channelDeleted",n),_.value=!1,alert("チャンネルを削除しました")}catch(t){let c="チャンネル削除に失敗しました";t.response&&t.response.data&&t.response.data.message&&(c=t.response.data.message),alert(c),console.error("Channel deletion failed:",t)}},A=async n=>{var s;if(confirm("このチャンネルから退出しますか？"))try{const t=(s=document.head.querySelector('meta[name="csrf-token"]'))==null?void 0:s.content;await V.post(`/channels/${n}/leave`,{},{headers:t?{"X-CSRF-TOKEN":t}:{}}),y("channelLeft",n),_.value=!1,alert("チャンネルから退出しました")}catch(t){let c="チャンネル退出に失敗しました";t.response&&t.response.data&&t.response.data.message&&(c=t.response.data.message),alert(c),console.error("Channel leave failed:",t)}},T=(n,s)=>{s.stopPropagation(),B.value=n,N.value={x:s.clientX,y:s.clientY},_.value=!0},O=()=>{_.value=!1,B.value=null},Z=async n=>{try{const s=await V.get(`/channels/${n}/members`);return m.value[n]=s.data,s.data}catch(s){return console.error("Error fetching channel members:",s),m.value[n]=[],[]}},ee=async()=>{if(d.value.length===0)return;const n=d.value.map(async s=>{m.value[s.id]||await Z(s.id)});await Promise.all(n)};X(d,async n=>{n.length>0&&await ee()},{immediate:!0});const te=async n=>{$.value=n,m.value[n]||await Z(n),r.value=!0},se=n=>{te(n)},ne=n=>{},Q=n=>{var I;const s=(I=document.querySelector('meta[name="user-id"]'))==null?void 0:I.content;if(!s)return!1;const c=(m.value[n]||[]).find(ue=>ue.id===parseInt(s));return c&&c.role==="admin"};Y(()=>{document.addEventListener("click",O)}),G(()=>{document.removeEventListener("click",O)});function le(n,s){let t;return function(...c){const I=()=>{t=null,n.apply(this,c)};clearTimeout(t),t=setTimeout(I,s)}}const ae=le(async n=>{if(!n.trim()){j.value=[...d.value],L.value=!1,U.value="",C.value=!1;return}L.value=!0,U.value="",C.value=!0;try{const s=await V.get("/channels/search",{params:{q:n.trim()}});j.value=s.data.channels.map(t=>{var c;return{...t,active:(c=d.value.find(I=>I.id===t.id))==null?void 0:c.active}})}catch(s){console.error("Search error:",s),U.value="検索中にエラーが発生しました",j.value=[]}finally{L.value=!1}},300),oe=()=>{ae(M.value)},re=()=>{M.value="",j.value=[...d.value],U.value="",C.value=!1},ie=(n,s)=>{if(!s)return n;const t=new RegExp(`(${s})`,"gi");return n.replace(t,'<mark class="bg-yellow-200 text-black px-1 rounded">$1</mark>')};return X(d,n=>{M.value||(j.value=[...n])},{immediate:!0}),(n,s)=>(l(),a("div",Pe,[e("div",Qe,[s[7]||(s[7]=e("span",null,"test",-1)),e("div",Je,[e("span",{class:R([g.manualOffline?"bg-gray-400":"bg-green-500","h-3 w-3 rounded-full inline-block"])},null,2),e("button",{onClick:s[0]||(s[0]=t=>y("toggleManualOffline",!g.manualOffline)),class:"text-xs bg-gray-700 px-2 py-1 rounded hover:bg-gray-600"},x(g.manualOffline?"オフライン中":"オンライン中"),1)]),k(E(K),{class:"h-5 w-5"})]),e("div",We,[e("div",Ye,[D(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>M.value=t),onInput:oe,type:"text",placeholder:"チャンネル検索...",class:"w-full px-2 py-1 pr-8 rounded border border-gray-300 text-gray-900 focus:outline-none focus:ring-2 focus:ring-purple-400"},null,544),[[P,M.value]]),M.value?(l(),a("button",{key:0,onClick:re,class:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",title:"検索をクリア"},s[8]||(s[8]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))):b("",!0)])]),e("div",Ge,[e("div",et,[e("div",tt,[e("h2",st,[k(E(K),{class:"h-4 w-4 mr-1"}),S(" "+x(C.value?"検索結果":"チャンネル")+" ",1),C.value?(l(),a("span",nt,"("+x(j.value.length)+")",1)):b("",!0)]),C.value?b("",!0):(l(),a("button",{key:0,onClick:s[2]||(s[2]=t=>p.value=!0),class:"text-slack-purple-light hover:text-white"},[k(E(ke),{class:"h-4 w-4"})]))]),e("ul",null,[(l(!0),a(F,null,H(j.value,t=>(l(),a("li",{key:t.id,class:R(["group flex items-center justify-between rounded px-2 py-1",{"text-slack-active-item-text bg-slack-active-item":t.active,"hover:bg-purple-600":!t.active}])},[e("div",{onClick:c=>i(t.id),class:"flex items-center flex-1 cursor-pointer"},[k(E(be),{class:"h-5 w-5 mr-2"}),C.value&&M.value?(l(),a("span",{key:0,innerHTML:ie(t.name,M.value)},null,8,at)):(l(),a("span",ot,x(t.name),1))],8,lt),e("div",rt,[Q(t.id)?(l(),a("button",{key:0,onClick:z(c=>se(t.id),["stop"]),class:"text-slack-purple-light hover:text-white transition-opacity",title:`${t.name}にユーザーを招待`},[k(E(_e),{class:"h-4 w-4"})],8,it)):b("",!0),e("button",{onClick:z(c=>T(t,c),["stop"]),class:"text-slack-purple-light hover:text-white transition-opacity opacity-0 group-hover:opacity-100",title:`${t.name}のメニュー`},[k(E(we),{class:"h-4 w-4"})],8,ut)])],2))),128))]),L.value?(l(),a("div",ct,s[9]||(s[9]=[e("svg",{class:"animate-spin h-3 w-3 mr-1",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),S(" 検索中... ")]))):b("",!0),U.value?(l(),a("div",dt,x(U.value),1)):b("",!0),!L.value&&!U.value&&C.value&&j.value.length===0?(l(),a("div",vt,' "'+x(M.value)+'" に一致するチャンネルが見つかりませんでした ',1)):b("",!0)]),e("div",mt,[e("h2",ht,[k(E(K),{class:"h-4 w-4 mr-1"}),S(" ダイレクトメッセージ ("+x(v.value.length)+") ",1)]),e("ul",null,[(l(!0),a(F,null,H(v.value,t=>(l(),a("li",{key:t.id,class:"flex items-center rounded px-2 py-1 hover:bg-purple-600 cursor-pointer"},[e("span",{class:R(["h-3 w-3 rounded-full mr-2",{"bg-green-500":!!t.online,"bg-gray-400":!t.online}])},null,2),S(" "+x(t.name),1)]))),128))])])]),k($e,{show:p.value,onCreateChannel:o,onClose:s[3]||(s[3]=t=>p.value=!1)},null,8,["show"]),k(Xe,{show:r.value,"channel-id":$.value,"current-users":m.value[$.value]||[],onClose:s[4]||(s[4]=t=>r.value=!1),onInvitationsSent:ne},null,8,["show","channel-id","current-users"]),_.value&&B.value?(l(),a("div",{key:0,class:"fixed z-50 bg-white rounded-lg shadow-lg border border-gray-200 py-1 min-w-48",style:he({left:N.value.x+"px",top:N.value.y+"px"})},[e("div",ft,[e("div",pt,"#"+x(B.value.name),1),s[10]||(s[10]=e("div",{class:"text-sm text-gray-500"},"チャンネルメニュー",-1))]),Q(B.value.id)?(l(),a("button",{key:0,onClick:s[5]||(s[5]=t=>u(B.value.id)),class:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 flex items-center"},s[11]||(s[11]=[e("svg",{class:"h-4 w-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),S(" チャンネルを削除 ")]))):b("",!0),e("button",{onClick:s[6]||(s[6]=t=>A(B.value.id)),class:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 flex items-center"},s[12]||(s[12]=[e("svg",{class:"h-4 w-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1),S(" チャンネルから退出 ")]))],4)):b("",!0)]))}};export{_t as _,Ct as a,kt as b,bt as r};
