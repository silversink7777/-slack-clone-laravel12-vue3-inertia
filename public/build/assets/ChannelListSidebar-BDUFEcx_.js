import{e as n,o as a,a as e,d as v,f as x,j as q,k as z,v as P,B as X,c as ue,w as I,b,D as de,g as M,t as p,F as D,h as H,l as ce,y as J,q as ve,A as me,n as R,u as L,Q as he,E as fe,z as O}from"./app-DRrSN6Zv.js";import{_ as pe}from"./Modal-BYMCoQAE.js";import{_ as Y}from"./PrimaryButton-CgvwDNWi.js";import{_ as ge}from"./SecondaryButton-CpDzmALn.js";function kt(h,y){return a(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"})])}function _t(h,y){return a(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])}function xe(h,y){return a(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{d:"M4.913 2.658c2.075-.27 4.19-.408 6.337-.408 2.147 0 4.262.139 6.337.408 1.922.25 3.291 1.861 3.405 3.727a4.403 4.403 0 0 0-1.032-.211 50.89 50.89 0 0 0-8.42 0c-2.358.196-4.04 2.19-4.04 4.434v4.286a4.47 4.47 0 0 0 2.433 3.984L7.28 21.53A.75.75 0 0 1 6 21v-4.03a48.527 48.527 0 0 1-1.087-.128C2.905 16.58 1.5 14.833 1.5 12.862V6.638c0-1.97 1.405-3.718 3.413-3.979Z"}),e("path",{d:"M15.75 7.5c-1.376 0-2.739.057-4.086.169C10.124 7.797 9 9.103 9 10.609v4.285c0 1.507 1.128 2.814 2.67 2.94 1.243.102 2.5.157 3.768.165l2.782 2.781a.75.75 0 0 0 1.28-.53v-2.39l.33-.026c1.542-.125 2.67-1.433 2.67-2.94v-4.286c0-1.505-1.125-2.811-2.664-2.94A49.392 49.392 0 0 0 15.75 7.5Z"})])}function K(h,y){return a(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M12.53 16.28a.75.75 0 0 1-1.06 0l-7.5-7.5a.75.75 0 0 1 1.06-1.06L12 14.69l6.97-6.97a.75.75 0 1 1 1.06 1.06l-7.5 7.5Z","clip-rule":"evenodd"})])}function ye(h,y){return a(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M10.5 6a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Zm0 6a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Zm0 6a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Z","clip-rule":"evenodd"})])}function be(h,y){return a(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M11.097 1.515a.75.75 0 0 1 .589.882L10.666 7.5h4.47l1.079-5.397a.75.75 0 1 1 1.47.294L16.665 7.5h3.585a.75.75 0 0 1 0 1.5h-3.885l-1.2 6h3.585a.75.75 0 0 1 0 1.5h-3.885l-1.08 5.397a.75.75 0 1 1-1.47-.294l1.02-5.103h-4.47l-1.08 5.397a.75.75 0 1 1-1.47-.294l1.02-5.103H3.75a.75.75 0 0 1 0-1.5h3.885l1.2-6H5.25a.75.75 0 0 1 0-1.5h3.885l1.08-5.397a.75.75 0 0 1 .882-.588ZM10.365 9l-1.2 6h4.47l1.2-6h-4.47Z","clip-rule":"evenodd"})])}function we(h,y){return a(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M12 3.75a.75.75 0 0 1 .75.75v6.75h6.75a.75.75 0 0 1 0 1.5h-6.75v6.75a.75.75 0 0 1-1.5 0v-6.75H4.5a.75.75 0 0 1 0-1.5h6.75V4.5a.75.75 0 0 1 .75-.75Z","clip-rule":"evenodd"})])}function ke(h,y){return a(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{d:"M5.25 6.375a4.125 4.125 0 1 1 8.25 0 4.125 4.125 0 0 1-8.25 0ZM2.25 19.125a7.125 7.125 0 0 1 14.25 0v.003l-.001.119a.75.75 0 0 1-.363.63 13.067 13.067 0 0 1-6.761 1.873c-2.472 0-4.786-.684-6.76-1.873a.75.75 0 0 1-.364-.63l-.001-.122ZM18.75 7.5a.75.75 0 0 0-1.5 0v2.25H15a.75.75 0 0 0 0 1.5h2.25v2.25a.75.75 0 0 0 1.5 0v-2.25H21a.75.75 0 0 0 0-1.5h-2.25V7.5Z"})])}const _e={class:"bg-white rounded-lg p-6 w-full max-w-md"},Ce={__name:"AddChannelModal",props:{show:Boolean},emits:["createChannel","close"],setup(h,{emit:y}){const U=y,f=v(""),m=()=>{f.value.trim()&&(U("createChannel",f.value.trim()),f.value="")},g=()=>{U("close")};return(w,i)=>h.show?(a(),n("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center",onClick:q(g,["self"])},[e("div",_e,[i[3]||(i[3]=e("h2",{class:"text-lg font-bold mb-4"},"新しいチャンネルを作成する",-1)),e("form",{onSubmit:q(m,["prevent"])},[e("div",null,[i[1]||(i[1]=e("label",{for:"channel-name",class:"block text-sm font-medium text-gray-700"},"チャンネル名",-1)),z(e("input",{"onUpdate:modelValue":i[0]||(i[0]=C=>f.value=C),type:"text",id:"channel-name",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"# e.g. 新規プロジェクト",required:""},null,512),[[P,f.value]])]),e("div",{class:"mt-6 flex justify-end space-x-4"},[e("button",{type:"button",onClick:g,class:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300"}," キャンセル "),i[2]||(i[2]=e("button",{type:"submit",class:"px-4 py-2 bg-slack-purple-dark text-white rounded-md hover:bg-slack-purple-darker"}," 作成する ",-1))])],32)])])):x("",!0)}},$e={class:"p-6"},Me={class:"mb-6 p-4 bg-gray-50 rounded-lg"},Se={class:"space-y-3"},Be={class:"flex space-x-2"},Ue={key:0,class:"space-y-2"},je={class:"block text-sm font-medium text-gray-700"},Ae={class:"flex flex-wrap gap-2"},Le=["onClick"],Te={class:"mb-4"},Ee={class:"space-y-2 max-h-60 overflow-y-auto"},Ve=["id","value"],Ze=["for"],Ne={class:"font-medium text-gray-900"},Oe={class:"text-sm text-gray-500"},De={key:0,class:"mb-4"},He={class:"block text-sm font-medium text-gray-700 mb-2"},Fe={class:"flex flex-wrap gap-2"},Ie=["onClick"],qe={key:1,class:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded"},ze={key:2,class:"mb-4 p-3 bg-green-100 border border-green-400 text-green-700 rounded"},Re={class:"flex justify-end space-x-3"},Ke={__name:"InviteUsersModal",props:{show:{type:Boolean,default:!1},channelId:{type:[String,Number],default:0},currentUsers:{type:Array,default:()=>[]}},emits:["close","invitations-sent"],setup(h,{emit:y}){const U=h,f=y,m=v([]),g=v([]),w=v(""),i=v([]),C=v(!1),c=v(""),k=v(""),j=async()=>{try{const o=await fetch("/users"),r=await o.json();o.ok?g.value=r.data.filter(d=>!U.currentUsers.some(B=>B.id===d.id)):c.value=r.message||"ユーザー一覧の取得に失敗しました"}catch(o){c.value="ユーザー一覧の取得に失敗しました",console.error("Load users error:",o)}},Z=o=>{const r=g.value.find(d=>d.id===o);return r?r.name:"Unknown User"},$=o=>{m.value=m.value.filter(r=>r!==o)},T=()=>{const o=w.value.trim();if(!o)return;if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o)){c.value="有効なメールアドレスを入力してください";return}if(i.value.includes(o)){c.value="このメールアドレスは既に追加されています";return}if(g.value.find(E=>E.email===o)){c.value="このメールアドレスのユーザーは既に選択可能なユーザーリストに含まれています。ユーザーリストから選択してください。";return}if(m.value.map(E=>{const N=g.value.find(F=>F.id===E);return N?N.email:null}).filter(E=>E).includes(o)){c.value="このメールアドレスのユーザーは既に選択されています";return}i.value.push(o),w.value="",c.value=""},A=o=>{i.value.splice(o,1)},S=async()=>{if(!(m.value.length===0&&i.value.length===0)){C.value=!0,c.value="",k.value="";try{const o=await fetch(`/channels/${U.channelId}/invite`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify({user_ids:m.value,emails:i.value})}),r=await o.json();if(o.ok){const d=m.value.length+i.value.length;k.value=`${d}件の招待を送信しました`,m.value=[],i.value=[],f("invitations-sent",r),setTimeout(()=>{_()},2e3)}else c.value=r.message||"招待の送信に失敗しました"}catch(o){c.value="招待の送信に失敗しました",console.error("Invitation error:",o)}finally{C.value=!1}}},_=()=>{m.value=[],i.value=[],w.value="",c.value="",k.value="",f("close")};return X(()=>U.show,o=>{o&&(c.value="",k.value="",j())}),(o,r)=>(a(),ue(pe,{show:h.show,onClose:_},{default:I(()=>[e("div",$e,[r[8]||(r[8]=e("h2",{class:"text-lg font-medium text-gray-900 mb-4"}," ユーザーを招待 ",-1)),e("div",Me,[r[3]||(r[3]=e("h3",{class:"text-md font-medium text-gray-900 mb-3"}," メールアドレスで招待 ",-1)),e("div",Se,[e("div",Be,[z(e("input",{"onUpdate:modelValue":r[0]||(r[0]=d=>w.value=d),type:"email",placeholder:"メールアドレスを入力",class:"flex-1 rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",onKeyup:de(T,["enter"])},null,544),[[P,w.value]]),b(Y,{onClick:T,disabled:!w.value.trim()||C.value,class:"px-4"},{default:I(()=>r[2]||(r[2]=[M(" 追加 ")])),_:1,__:[2]},8,["disabled"])]),i.value.length>0?(a(),n("div",Ue,[e("label",je," 招待するメールアドレス ("+p(i.value.length)+"件) ",1),e("div",Ae,[(a(!0),n(D,null,H(i.value,(d,B)=>(a(),n("span",{key:B,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},[M(p(d)+" ",1),e("button",{onClick:E=>A(B),class:"ml-1 inline-flex items-center justify-center w-4 h-4 rounded-full text-blue-400 hover:bg-blue-200 hover:text-blue-500"}," × ",8,Le)]))),128))])])):x("",!0)])]),e("div",Te,[r[4]||(r[4]=e("h3",{class:"text-md font-medium text-gray-900 mb-3"}," 既存ユーザーを選択 ",-1)),r[5]||(r[5]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," 招待するユーザーを選択 ",-1)),e("div",Ee,[(a(!0),n(D,null,H(g.value,d=>(a(),n("div",{key:d.id,class:"flex items-center space-x-3 p-2 border rounded hover:bg-gray-50"},[z(e("input",{type:"checkbox",id:"user-"+d.id,value:d.id,"onUpdate:modelValue":r[1]||(r[1]=B=>m.value=B),class:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,8,Ve),[[ce,m.value]]),e("label",{for:"user-"+d.id,class:"flex-1 cursor-pointer"},[e("div",Ne,p(d.name),1),e("div",Oe,p(d.email),1)],8,Ze)]))),128))])]),m.value.length>0?(a(),n("div",De,[e("label",He," 選択されたユーザー ("+p(m.value.length)+"人) ",1),e("div",Fe,[(a(!0),n(D,null,H(m.value,d=>(a(),n("span",{key:d,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800"},[M(p(Z(d))+" ",1),e("button",{onClick:B=>$(d),class:"ml-1 inline-flex items-center justify-center w-4 h-4 rounded-full text-indigo-400 hover:bg-indigo-200 hover:text-indigo-500"}," × ",8,Ie)]))),128))])])):x("",!0),c.value?(a(),n("div",qe,p(c.value),1)):x("",!0),k.value?(a(),n("div",ze,p(k.value),1)):x("",!0),e("div",Re,[b(ge,{onClick:_},{default:I(()=>r[6]||(r[6]=[M(" キャンセル ")])),_:1,__:[6]}),b(Y,{onClick:S,disabled:m.value.length===0&&i.value.length===0||C.value,loading:C.value},{default:I(()=>r[7]||(r[7]=[M(" 招待を送信 ")])),_:1,__:[7]},8,["disabled","loading"])])])]),_:1},8,["show"]))}},Xe={class:"w-64 bg-slack-purple-dark dark:bg-gray-800 text-slack-purple-light dark:text-gray-300 flex flex-col"},Pe={class:"px-4 h-16 flex items-center justify-between font-bold text-white dark:text-gray-100 text-lg border-b border-purple-800 dark:border-gray-700"},Qe={class:"flex items-center space-x-2"},Je={class:"p-2"},Ye={class:"relative"},Ge={class:"flex-1 overflow-y-auto p-2"},We={class:"mb-4"},et={class:"flex items-center justify-between px-2"},tt={class:"text-sm font-bold flex items-center"},st={key:0,class:"ml-2 text-xs text-gray-400"},lt=["onClick"],at=["innerHTML"],nt={key:1},rt={class:"flex items-center space-x-1"},ot=["onClick","title"],it=["onClick","title"],ut={key:0,class:"text-xs text-gray-400 px-2 py-1 flex items-center"},dt={key:1,class:"text-xs text-red-400 px-2 py-1"},ct={key:2,class:"text-xs text-gray-400 px-2 py-1"},vt={class:"mb-4"},mt={class:"flex items-center justify-between px-2"},ht={class:"text-sm font-bold flex items-center"},ft=["onClick"],pt={class:"px-4 py-2 border-b border-gray-100 dark:border-gray-700"},gt={class:"font-medium text-gray-900 dark:text-gray-100"},Ct={__name:"ChannelListSidebar",props:{channels:Array,"direct-messages":Array,manualOffline:Boolean},emits:["selectChannel","newChannelAdded","toggleManualOffline","channelDeleted","channelLeft","selectDirectMessage","directMessageStarted"],setup(h,{emit:y}){const U=h,f=J(()=>U.channels||[]),m=J(()=>U["direct-messages"]||[]),g=y,w=v(!1),i=v(!1),C=v(0),c=v({}),k=v(!1),j=v(null),Z=v({x:0,y:0}),$=v(""),T=v(!1),A=v(""),S=v([...f.value]),_=v(!1),o=l=>{g("selectChannel",l)},r=async l=>{var s;try{const t=(s=document.head.querySelector('meta[name="csrf-token"]'))==null?void 0:s.content,u=await O.post("/channels",{name:l},{headers:t?{"X-CSRF-TOKEN":t}:{}});g("newChannelAdded",u.data),w.value=!1}catch(t){let u="チャンネル作成に失敗しました";t.response&&t.response.status===419?u="セッションの有効期限が切れています。ページを再読み込みしてください。":t.response&&t.response.data&&t.response.data.message&&(u=t.response.data.message),alert(u),console.error("Channel creation failed:",t)}},d=async l=>{var s;if(confirm("このチャンネルを削除しますか？この操作は取り消せません。"))try{const t=(s=document.head.querySelector('meta[name="csrf-token"]'))==null?void 0:s.content;await O.delete(`/channels/${l}`,{headers:t?{"X-CSRF-TOKEN":t}:{}}),g("channelDeleted",l),k.value=!1,alert("チャンネルを削除しました")}catch(t){let u="チャンネル削除に失敗しました";t.response&&t.response.data&&t.response.data.message&&(u=t.response.data.message),alert(u),console.error("Channel deletion failed:",t)}},B=async l=>{var s;if(confirm("このチャンネルから退出しますか？"))try{const t=(s=document.head.querySelector('meta[name="csrf-token"]'))==null?void 0:s.content;await O.post(`/channels/${l}/leave`,{},{headers:t?{"X-CSRF-TOKEN":t}:{}}),g("channelLeft",l),k.value=!1,alert("チャンネルから退出しました")}catch(t){let u="チャンネル退出に失敗しました";t.response&&t.response.data&&t.response.data.message&&(u=t.response.data.message),alert(u),console.error("Channel leave failed:",t)}},E=(l,s)=>{s.stopPropagation(),j.value=l,Z.value={x:s.clientX,y:s.clientY},k.value=!0},N=()=>{k.value=!1,j.value=null},F=async l=>{try{const s=await O.get(`/channels/${l}/members`);return c.value[l]=s.data,s.data}catch(s){return console.error("Error fetching channel members:",s),c.value[l]=[],[]}},G=async()=>{if(f.value.length===0)return;const l=f.value.map(async s=>{c.value[s.id]||await F(s.id)});await Promise.all(l)};X(f,async l=>{l.length>0&&await G()},{immediate:!0});const W=async l=>{C.value=l,c.value[l]||await F(l),i.value=!0},ee=l=>{W(l)},te=l=>{},Q=l=>{var V;const s=(V=document.querySelector('meta[name="user-id"]'))==null?void 0:V.content;if(!s)return!1;const u=(c.value[l]||[]).find(ie=>ie.id===parseInt(s));return u&&u.role==="admin"};ve(()=>{document.addEventListener("click",N)}),me(()=>{document.removeEventListener("click",N)});function se(l,s){let t;return function(...u){const V=()=>{t=null,l.apply(this,u)};clearTimeout(t),t=setTimeout(V,s)}}const le=se(async l=>{if(!l.trim()){S.value=[...f.value],T.value=!1,A.value="",_.value=!1;return}T.value=!0,A.value="",_.value=!0;try{const s=await O.get("/channels/search",{params:{q:l.trim()}});S.value=s.data.channels.map(t=>{var u;return{...t,active:(u=f.value.find(V=>V.id===t.id))==null?void 0:u.active}})}catch(s){console.error("Search error:",s),A.value="検索中にエラーが発生しました",S.value=[]}finally{T.value=!1}},300),ae=()=>{le($.value)},ne=()=>{$.value="",S.value=[...f.value],A.value="",_.value=!1},re=(l,s)=>{if(!s)return l;const t=new RegExp(`(${s})`,"gi");return l.replace(t,'<mark class="bg-yellow-200 text-black px-1 rounded">$1</mark>')};X(f,l=>{$.value||(S.value=[...l])},{immediate:!0});const oe=l=>{g("selectDirectMessage",l)};return(l,s)=>(a(),n("div",Xe,[e("div",Pe,[s[8]||(s[8]=e("span",null,"test",-1)),e("div",Qe,[e("span",{class:R([h.manualOffline?"bg-gray-400":"bg-green-500","h-3 w-3 rounded-full inline-block"])},null,2),e("button",{onClick:s[0]||(s[0]=t=>g("toggleManualOffline",!h.manualOffline)),class:"text-xs bg-gray-700 px-2 py-1 rounded hover:bg-gray-600"},p(h.manualOffline?"オフライン中":"オンライン中"),1)]),b(L(K),{class:"h-5 w-5"})]),e("div",Je,[e("div",Ye,[z(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>$.value=t),onInput:ae,type:"text",placeholder:"チャンネル検索...",class:"w-full px-2 py-1 pr-8 rounded border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-100 bg-white dark:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-purple-400 dark:focus:ring-purple-500"},null,544),[[P,$.value]]),$.value?(a(),n("button",{key:0,onClick:ne,class:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",title:"検索をクリア"},s[9]||(s[9]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))):x("",!0)])]),e("div",Ge,[e("div",We,[e("div",et,[e("h2",tt,[b(L(K),{class:"h-4 w-4 mr-1"}),M(" "+p(_.value?"検索結果":"チャンネル")+" ",1),_.value?(a(),n("span",st,"("+p(S.value.length)+")",1)):x("",!0)]),_.value?x("",!0):(a(),n("button",{key:0,onClick:s[2]||(s[2]=t=>w.value=!0),class:"text-slack-purple-light hover:text-white"},[b(L(we),{class:"h-4 w-4"})]))]),e("ul",null,[(a(!0),n(D,null,H(S.value,t=>(a(),n("li",{key:t.id,class:R(["group flex items-center justify-between rounded px-2 py-1",{"text-slack-active-item-text bg-slack-active-item":t.active,"hover:bg-purple-600":!t.active}])},[e("div",{onClick:u=>o(t.id),class:"flex items-center flex-1 cursor-pointer"},[b(L(be),{class:"h-5 w-5 mr-2"}),_.value&&$.value?(a(),n("span",{key:0,innerHTML:re(t.name,$.value)},null,8,at)):(a(),n("span",nt,p(t.name),1))],8,lt),e("div",rt,[Q(t.id)?(a(),n("button",{key:0,onClick:q(u=>ee(t.id),["stop"]),class:"text-slack-purple-light hover:text-white transition-opacity",title:`${t.name}にユーザーを招待`},[b(L(ke),{class:"h-4 w-4"})],8,ot)):x("",!0),e("button",{onClick:q(u=>E(t,u),["stop"]),class:"text-slack-purple-light hover:text-white transition-opacity opacity-0 group-hover:opacity-100",title:`${t.name}のメニュー`},[b(L(ye),{class:"h-4 w-4"})],8,it)])],2))),128))]),T.value?(a(),n("div",ut,s[10]||(s[10]=[e("svg",{class:"animate-spin h-3 w-3 mr-1",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),M(" 検索中... ")]))):x("",!0),A.value?(a(),n("div",dt,p(A.value),1)):x("",!0),!T.value&&!A.value&&_.value&&S.value.length===0?(a(),n("div",ct,' "'+p($.value)+'" に一致するチャンネルが見つかりませんでした ',1)):x("",!0)]),e("div",vt,[e("div",mt,[e("h2",ht,[b(L(K),{class:"h-4 w-4 mr-1"}),M(" ダイレクトメッセージ ("+p(m.value.length)+") ",1)]),e("button",{onClick:s[3]||(s[3]=()=>L(he).visit("/direct-messages")),class:"text-slack-purple-light hover:text-white",title:"新しいDMを開始"},[b(L(xe),{class:"h-4 w-4"})])]),e("ul",null,[(a(!0),n(D,null,H(m.value,t=>(a(),n("li",{key:t.id,class:"flex items-center rounded px-2 py-1 hover:bg-purple-600 cursor-pointer",onClick:u=>oe(t.id)},[e("span",{class:R(["h-3 w-3 rounded-full mr-2",{"bg-green-500":!!t.online,"bg-gray-400":!t.online}])},null,2),M(" "+p(t.name),1)],8,ft))),128))])])]),b(Ce,{show:w.value,onCreateChannel:r,onClose:s[4]||(s[4]=t=>w.value=!1)},null,8,["show"]),b(Ke,{show:i.value,"channel-id":C.value,"current-users":c.value[C.value]||[],onClose:s[5]||(s[5]=t=>i.value=!1),onInvitationsSent:te},null,8,["show","channel-id","current-users"]),k.value&&j.value?(a(),n("div",{key:0,class:"fixed z-50 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 py-1 min-w-48",style:fe({left:Z.value.x+"px",top:Z.value.y+"px"})},[e("div",pt,[e("div",gt,"#"+p(j.value.name),1),s[11]||(s[11]=e("div",{class:"text-sm text-gray-500 dark:text-gray-400"},"チャンネルメニュー",-1))]),Q(j.value.id)?(a(),n("button",{key:0,onClick:s[6]||(s[6]=t=>d(j.value.id)),class:"w-full text-left px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 flex items-center"},s[12]||(s[12]=[e("svg",{class:"h-4 w-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),M(" チャンネルを削除 ")]))):x("",!0),e("button",{onClick:s[7]||(s[7]=t=>B(j.value.id)),class:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center"},s[13]||(s[13]=[e("svg",{class:"h-4 w-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1),M(" チャンネルから退出 ")]))],4)):x("",!0)]))}};export{Ct as _,_t as a,kt as r};
