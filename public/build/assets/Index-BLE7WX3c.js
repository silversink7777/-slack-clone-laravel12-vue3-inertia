import{d as f,c as v,o as r,w as h,a as e,e as o,f as g,j as V,k as m,v as B,F as i,h as u,t as a,m as w,b as H,u as k,S as M,g as N,n as j,Q as D}from"./app-CAzOxNXh.js";import{_ as z}from"./AdminLayout-DuMzM902.js";const O={class:"space-y-6"},U={class:"bg-white rounded-lg shadow border border-gray-200 p-6"},A={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},F=["value"],I=["value"],Q={class:"bg-white rounded-lg shadow border border-gray-200"},$={class:"px-6 py-4 border-b border-gray-200"},E={class:"text-lg font-medium text-gray-900"},J={class:"overflow-x-auto"},P={class:"min-w-full divide-y divide-gray-200"},q={class:"bg-white divide-y divide-gray-200"},G={class:"px-6 py-4 whitespace-nowrap"},K={class:"px-6 py-4 whitespace-nowrap max-w-xs truncate"},R={class:"px-6 py-4 whitespace-nowrap"},W={class:"px-6 py-4 whitespace-nowrap"},X={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Y={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Z={class:"flex justify-end space-x-2"},ee=["onClick"],te={key:0,class:"px-6 py-3 border-t border-gray-200"},se={class:"flex items-center justify-between"},le={class:"text-sm text-gray-700"},re={class:"flex space-x-2"},ae=["innerHTML"],oe={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},de={class:"mt-3 text-center"},ne={class:"mt-2 px-7 py-3"},ie={class:"text-sm text-gray-500"},ge={__name:"Index",props:{admin:Object,messages:Object,users:Array,channels:Array,filters:Object},setup(l){const C=l,c=f(!1),n=f(null),S=()=>{D.get(route("admin.messages.index"),C.filters,{preserveState:!0,preserveScroll:!0})},_=d=>{n.value=d,c.value=!0},x=()=>{c.value=!1,n.value=null},L=()=>{n.value&&D.delete(route("admin.messages.destroy",n.value.id),{onSuccess:()=>{x()}})},T=d=>new Date(d).toLocaleDateString("ja-JP");return(d,t)=>(r(),v(z,{admin:l.admin},{default:h(()=>{var y;return[e("div",O,[t[13]||(t[13]=e("div",{class:"flex justify-between items-center"},[e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"メッセージ管理"),e("p",{class:"text-gray-600"},"全メッセージの管理・検索・削除ができます")])],-1)),e("div",U,[e("form",{onSubmit:V(S,["prevent"]),class:"space-y-4"},[e("div",A,[e("div",null,[t[3]||(t[3]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"検索",-1)),m(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>l.filters.search=s),type:"text",placeholder:"メッセージ内容",class:"block w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[B,l.filters.search]])]),e("div",null,[t[5]||(t[5]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"ユーザー",-1)),m(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>l.filters.user_id=s),class:"block w-full px-3 py-2 border border-gray-300 rounded-lg"},[t[4]||(t[4]=e("option",{value:""},"すべて",-1)),(r(!0),o(i,null,u(l.users,s=>(r(),o("option",{key:s.id,value:s.id},a(s.name),9,F))),128))],512),[[w,l.filters.user_id]])]),e("div",null,[t[7]||(t[7]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"チャンネル",-1)),m(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>l.filters.channel_id=s),class:"block w-full px-3 py-2 border border-gray-300 rounded-lg"},[t[6]||(t[6]=e("option",{value:""},"すべて",-1)),(r(!0),o(i,null,u(l.channels,s=>(r(),o("option",{key:s.id,value:s.id},a(s.name),9,I))),128))],512),[[w,l.filters.channel_id]])]),t[8]||(t[8]=e("div",{class:"flex items-end"},[e("button",{type:"submit",class:"w-full bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700"},"検索")],-1))])],32)]),e("div",Q,[e("div",$,[e("h3",E,"メッセージ一覧 ("+a(l.messages.total)+"件)",1)]),e("div",J,[e("table",P,[t[10]||(t[10]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"ID"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"内容"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"ユーザー"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"チャンネル"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"作成日"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"操作")])],-1)),e("tbody",q,[(r(!0),o(i,null,u(l.messages.data,s=>{var b,p;return r(),o("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",G,a(s.id),1),e("td",K,a(s.content),1),e("td",R,a(((b=s.user)==null?void 0:b.name)||"-"),1),e("td",W,a(((p=s.channel)==null?void 0:p.name)||"-"),1),e("td",X,a(T(s.created_at)),1),e("td",Y,[e("div",Z,[H(k(M),{href:d.route("admin.messages.show",s.id),class:"text-blue-600 hover:text-blue-900"},{default:h(()=>t[9]||(t[9]=[N("詳細")])),_:2,__:[9]},1032,["href"]),e("button",{onClick:ue=>_(s),class:"text-red-600 hover:text-red-900"},"削除",8,ee)])])])}),128))])])]),l.messages.links?(r(),o("div",te,[e("div",se,[e("div",le,a(l.messages.from)+" - "+a(l.messages.to)+" / "+a(l.messages.total)+"件",1),e("div",re,[d.link&&d.link.url?(r(!0),o(i,{key:0},u(l.messages.links,s=>(r(),v(k(M),{key:s.label,href:s.url,class:j(["px-3 py-2 text-sm rounded-lg",s.active?"bg-blue-600 text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"]),innerHTML:s.label},null,8,["href","class","innerHTML"]))),128)):d.link?(r(),o("span",{key:1,class:j(["px-3 py-2 text-sm rounded-lg cursor-not-allowed","bg-gray-100 text-gray-400 border border-gray-200"]),innerHTML:d.link.label},null,8,ae)):g("",!0)])])])):g("",!0)]),c.value?(r(),o("div",{key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",onClick:x},[e("div",oe,[e("div",de,[t[11]||(t[11]=e("div",{class:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100"},[e("svg",{class:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),t[12]||(t[12]=e("h3",{class:"text-lg font-medium text-gray-900 mt-4"},"メッセージを削除",-1)),e("div",ne,[e("p",ie,"「"+a((y=n.value)==null?void 0:y.content)+"」を削除しますか？この操作は取り消せません。",1)]),e("div",{class:"flex justify-center space-x-4 mt-4"},[e("button",{onClick:x,class:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400"},"キャンセル"),e("button",{onClick:L,class:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700"},"削除")])])])])):g("",!0)])]}),_:1},8,["admin"]))}};export{ge as default};
