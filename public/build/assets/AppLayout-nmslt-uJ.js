import{e as a,o as s,a as e,d as k,B as P,q as W,z as A,A as te,f as w,c as T,b as y,u,t as p,n as K,C as se,k as N,v as Q,g as F,F as Z,h as H,Q as q,j as X,w as R,p as re,r as G}from"./app-CkYNA2PG.js";import{_ as oe}from"./WorkspaceSidebar-DE7nfgqH.js";import{r as I,a as ne,_ as le}from"./ChannelListSidebar-CW67Kks2.js";import{_ as ie}from"./DialogModal-BD34DFbo.js";function ce(o,v){return s(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.5 12a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0Zm0 0c0 1.657 1.007 3 2.25 3S21 13.657 21 12a9 9 0 1 0-2.636 6.364M16.5 12V8.25"})])}function z(o,v){return s(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m4.5 12.75 6 6 9-13.5"})])}function de(o,v){return s(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function ue(o,v){return s(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 17.25v1.007a3 3 0 0 1-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0 1 15 18.257V17.25m6-12V15a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 15V5.25m18 0A2.25 2.25 0 0 0 18.75 3H5.25A2.25 2.25 0 0 0 3 5.25m18 0V12a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 12V5.25"})])}function he(o,v){return s(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.182 15.182a4.5 4.5 0 0 1-6.364 0M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0ZM9.75 9.75c0 .414-.168.75-.375.75S9 10.164 9 9.75 9.168 9 9.375 9s.375.336.375.75Zm-.375 0h.008v.015h-.008V9.75Zm5.625 0c0 .414-.168.75-.375.75s-.375-.336-.375-.75.168-.75.375-.75.375.336.375.75Zm-.375 0h.008v.015h-.008V9.75Z"})])}function ve(o,v){return s(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})])}function ge(o,v){return s(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 18.75a6 6 0 0 0 6-6v-1.5m-6 7.5a6 6 0 0 1-6-6v-1.5m6 7.5v3.75m-3.75 0h7.5M12 15.75a3 3 0 0 1-3-3V4.5a3 3 0 1 1 6 0v8.25a3 3 0 0 1-3 3Z"})])}function J(o,v){return s(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21.752 15.002A9.72 9.72 0 0 1 18 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 0 0 3 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 0 0 9.002-5.998Z"})])}function me(o,v){return s(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"})])}function Y(o,v){return s(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"})])}function fe(o,v){return s(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})])}function ee(o,v){return s(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"})])}function pe(o,v){return s(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})])}function ye(o,v){return s(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m15.75 10.5 4.72-4.72a.75.75 0 0 1 1.28.53v11.38a.75.75 0 0 1-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 0 0 2.25-2.25v-9a2.25 2.25 0 0 0-2.25-2.25h-9A2.25 2.25 0 0 0 2.25 7.5v9a2.25 2.25 0 0 0 2.25 2.25Z"})])}function ae(o,v){return s(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"})])}function xe(){const o=k("system"),v=k(!1),c=k(!1),b=()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",r=l=>{(l==="system"?b():l)==="dark"?(document.documentElement.classList.add("dark"),v.value=!0):(document.documentElement.classList.remove("dark"),v.value=!1)},n=async()=>{try{const l=await A.get("/api/auth/check");return console.log("Auth status:",l.data),l.data.authenticated}catch(l){return console.error("Failed to check auth status:",l),!1}},h=async()=>{var l,i;try{c.value=!0,console.log("Loading theme...");const d=await n();console.log("Is authenticated:",d);const x=await A.get("/theme");console.log("Theme loaded successfully:",x.data),o.value=x.data.theme,r(o.value)}catch(d){console.error("Failed to load theme:",d),console.error("Error response:",(l=d.response)==null?void 0:l.data),console.error("Error status:",(i=d.response)==null?void 0:i.status),o.value="system",r("system")}finally{c.value=!1}},C=async l=>{var i,d;try{c.value=!0,console.log("Updating theme to:",l);const x=await n();console.log("Is authenticated:",x),await A.post("/theme",{theme:l}),console.log("Theme updated successfully"),o.value=l,r(l)}catch(x){throw console.error("Failed to update theme:",x),console.error("Error response:",(i=x.response)==null?void 0:i.data),console.error("Error status:",(d=x.response)==null?void 0:d.status),x}finally{c.value=!1}},g=()=>{window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>{o.value==="system"&&r("system")})};return P(o,l=>{r(l)}),W(()=>{h(),g()}),{theme:o,isDark:v,isLoading:c,updateTheme:C,loadTheme:h}}const ke={class:"relative"},_e=["disabled"],we={class:"text-sm font-medium text-gray-700 dark:text-gray-300"},be={key:0,class:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-50"},$e={class:"py-1"},Ce={__name:"ThemeToggle",setup(o){const{theme:v,isDark:c,isLoading:b,updateTheme:r}=xe(),n=k(!1),h=l=>{switch(l){case"light":return"ãƒ©ã‚¤ãƒˆ";case"dark":return"ãƒ€ãƒ¼ã‚¯";case"system":return"ã‚·ã‚¹ãƒ†ãƒ ";default:return"ã‚·ã‚¹ãƒ†ãƒ "}},C=async l=>{try{await r(l),n.value=!1}catch(i){console.error("Failed to update theme:",i),alert("ãƒ†ãƒ¼ãƒžã®æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸ")}},g=l=>{l.target.closest(".relative")||(n.value=!1)};return W(()=>{document.addEventListener("click",g)}),te(()=>{document.removeEventListener("click",g)}),(l,i)=>(s(),a("div",ke,[e("button",{onClick:i[0]||(i[0]=d=>n.value=!n.value),class:"flex items-center space-x-2 px-3 py-2 rounded-lg bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",disabled:u(b)},[u(c)?(s(),T(u(ee),{key:0,class:"h-5 w-5 text-yellow-500"})):(s(),T(u(J),{key:1,class:"h-5 w-5 text-gray-600 dark:text-gray-400"})),e("span",we,p(h(u(v))),1),y(u(I),{class:"h-4 w-4 text-gray-500 dark:text-gray-400"})],8,_e),n.value?(s(),a("div",be,[e("div",$e,[e("button",{onClick:i[1]||(i[1]=d=>C("light")),class:K(["w-full flex items-center space-x-3 px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",{"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400":u(v)==="light"}])},[y(u(ee),{class:"h-4 w-4"}),i[4]||(i[4]=e("span",null,"ãƒ©ã‚¤ãƒˆ",-1)),u(v)==="light"?(s(),T(u(z),{key:0,class:"h-4 w-4 ml-auto"})):w("",!0)],2),e("button",{onClick:i[2]||(i[2]=d=>C("dark")),class:K(["w-full flex items-center space-x-3 px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",{"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400":u(v)==="dark"}])},[y(u(J),{class:"h-4 w-4"}),i[5]||(i[5]=e("span",null,"ãƒ€ãƒ¼ã‚¯",-1)),u(v)==="dark"?(s(),T(u(z),{key:0,class:"h-4 w-4 ml-auto"})):w("",!0)],2),e("button",{onClick:i[3]||(i[3]=d=>C("system")),class:K(["w-full flex items-center space-x-3 px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",{"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400":u(v)==="system"}])},[y(u(ue),{class:"h-4 w-4"}),i[6]||(i[6]=e("span",null,"ã‚·ã‚¹ãƒ†ãƒ ",-1)),u(v)==="system"?(s(),T(u(z),{key:0,class:"h-4 w-4 ml-auto"})):w("",!0)],2)])])):w("",!0)]))}},Me={class:"h-16 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 flex items-center justify-between px-6"},De={class:"flex items-center font-bold text-gray-900 dark:text-gray-100"},je={key:0},Se={key:1},Le={key:2},Be={class:"flex items-center space-x-4"},Ee={class:"relative search-container"},Ae={key:1,class:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-gray-800 rounded-md shadow-lg border border-gray-200 dark:border-gray-700 max-h-96 overflow-y-auto z-50"},Te={key:0,class:"p-4 text-center text-gray-500"},Ue={key:1,class:"p-4 text-center text-red-500"},Oe={key:2,class:"py-2"},Ve=["onClick"],Fe={class:"flex items-start space-x-3"},ze={class:"flex-shrink-0"},Ze={class:"w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center"},He={class:"text-sm font-medium text-gray-600"},Ke={class:"flex-1 min-w-0"},Re={class:"flex items-center space-x-2"},Ie={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},Pe={class:"text-xs text-gray-500 dark:text-gray-400"},We={class:"text-xs text-gray-400 dark:text-gray-500"},Ne={class:"mt-1 text-sm text-gray-700 dark:text-gray-300"},Qe=["innerHTML"],qe={key:3,class:"p-4 text-center text-gray-500"},Xe={class:"text-sm font-medium"},Ge={key:0,class:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-md shadow-lg py-1 z-50 border border-gray-200 dark:border-gray-700"},Je=["href"],Ye=["src","alt"],et={__name:"MainHeader",props:{activeChannel:Object,activeDirectMessage:Object},setup(o){var j;const c=(j=se().props.auth)==null?void 0:j.user,b=k(!1),r=k(null),n=k(""),h=k([]),C=k(!1),g=k(!1),l=k("");function i(D,_){let E;return function(...f){const S=()=>{E=null,D.apply(this,f)};clearTimeout(E),E=setTimeout(S,_)}}const d=i(async D=>{if(!D.trim()){h.value=[],g.value=!1;return}C.value=!0,l.value="";try{const _=await A.get("/messages/search",{params:{q:D.trim()}});h.value=_.data.messages,g.value=!0}catch(_){console.error("Search error:",_),l.value="æ¤œç´¢ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ",h.value=[]}finally{C.value=!1}},300),x=()=>{d(n.value)},U=()=>{n.value="",h.value=[],g.value=!1,l.value=""},O=D=>{q.visit(`/dashboard?channel=${D.channel.id}&message=${D.id}`),U()},V=(D,_)=>{if(!_)return D;const E=new RegExp(`(${_})`,"gi");return D.replace(E,'<mark class="bg-yellow-200 text-black px-1 rounded">$1</mark>')},$=()=>{q.post(route("logout"))},m=()=>{b.value=!b.value},M=()=>{b.value=!1},B=D=>{r.value&&!r.value.contains(D.target)&&M();const _=document.querySelector(".search-container");_&&!_.contains(D.target)&&(g.value=!1)};return W(()=>{document.addEventListener("click",B)}),te(()=>{document.removeEventListener("click",B)}),(D,_)=>{var E,f,S;return s(),a("div",Me,[e("div",null,[e("button",De,[o.activeChannel?(s(),a("span",je,p(o.activeChannel.name),1)):o.activeDirectMessage?(s(),a("span",Se,p(o.activeDirectMessage.name),1)):(s(),a("span",Le,"ãƒãƒ£ãƒ³ãƒãƒ«ã¾ãŸã¯ãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é¸æŠžã—ã¦ãã ã•ã„")),y(u(I),{class:"h-5 w-5 ml-1"})])]),e("div",Be,[y(Ce),y(u(de),{class:"h-6 w-6 text-gray-500 dark:text-gray-400"}),e("div",Ee,[y(u(ve),{class:"h-5 w-5 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),N(e("input",{"onUpdate:modelValue":_[0]||(_[0]=t=>n.value=t),onInput:x,onFocus:_[1]||(_[1]=t=>g.value=!0),type:"text",placeholder:"ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æ¤œç´¢ã™ã‚‹",class:"bg-gray-100 dark:bg-gray-700 rounded-md w-80 pl-10 pr-8 py-1.5 focus:ring-blue-500 focus:border-blue-500 border-transparent text-gray-900 dark:text-gray-100"},null,544),[[Q,n.value]]),n.value?(s(),a("button",{key:0,onClick:U,class:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",title:"æ¤œç´¢ã‚’ã‚¯ãƒªã‚¢"},_[2]||(_[2]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))):w("",!0),g.value&&(h.value.length>0||C.value||l.value)?(s(),a("div",Ae,[C.value?(s(),a("div",Te,_[3]||(_[3]=[e("div",{class:"flex items-center justify-center"},[e("svg",{class:"animate-spin h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]),F(" æ¤œç´¢ä¸­... ")],-1)]))):l.value?(s(),a("div",Ue,p(l.value),1)):h.value.length>0?(s(),a("div",Oe,[(s(!0),a(Z,null,H(h.value,t=>(s(),a("div",{key:t.id,onClick:L=>O(t),class:"px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer border-b border-gray-100 dark:border-gray-700 last:border-b-0"},[e("div",Fe,[e("div",ze,[e("div",Ze,[e("span",He,p(t.user.name.charAt(0).toUpperCase()),1)])]),e("div",Ke,[e("div",Re,[e("span",Ie,p(t.user.name),1),e("span",Pe,"#"+p(t.channel.name),1),e("span",We,p(t.date)+" "+p(t.time),1)]),e("div",Ne,[e("span",{innerHTML:V(t.content,n.value)},null,8,Qe)])])])],8,Ve))),128))])):(s(),a("div",qe,' "'+p(n.value)+'" ã«ä¸€è‡´ã™ã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ ',1))])):w("",!0)]),e("div",{ref_key:"userMenuRef",ref:r,class:"relative"},[e("button",{onClick:m,class:"flex items-center space-x-2 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100 focus:outline-none"},[y(u(ne),{class:"h-8 w-8"}),e("span",Xe,p((E=u(c))==null?void 0:E.name),1),y(u(I),{class:"h-4 w-4"})]),b.value?(s(),a("div",Ge,[e("a",{href:D.route("profile.show"),class:"flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 border-b border-gray-100 dark:border-gray-700"},[e("img",{src:(f=u(c))==null?void 0:f.profile_photo_url,alt:(S=u(c))==null?void 0:S.name,class:"w-8 h-8 rounded-full object-cover mr-2 border border-gray-300 dark:border-gray-600"},null,8,Ye),_[4]||(_[4]=e("span",null,"ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«",-1))],8,Je),e("button",{onClick:$,class:"block w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}," ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ ")])):w("",!0)],512)])])}}},tt={class:"p-4 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700"},st={class:"border border-gray-200 dark:border-gray-600 rounded-lg p-2 flex flex-col"},at={class:"relative"},rt=["disabled"],ot={key:0,class:"mt-2"},nt=["src"],lt={key:1,class:"mt-2"},it={class:"text-xs text-gray-500"},ct={key:3,class:"emoji-picker-popover absolute left-0 bottom-12 z-50 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded shadow-lg p-2 w-80 max-h-60 overflow-y-auto flex flex-wrap gap-1"},dt=["onClick"],ut={class:"flex items-center justify-between mt-2"},ht={class:"flex items-center space-x-2"},vt={class:"cursor-pointer text-gray-500 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-300"},gt={class:"text-gray-500 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-300"},mt={class:"text-gray-500 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-300"},ft={class:"flex items-center space-x-2"},pt={class:"text-gray-500 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-300"},yt=["disabled"],xt={__name:"MessageInput",props:{activeChannel:Object,activeDirectMessage:Object},emits:["messageSent"],setup(o,{emit:v}){const c=o,b=v,r=k(""),n=k(!1),h=k(!1),C=["ðŸ˜€","ðŸ˜ƒ","ðŸ˜„","ðŸ˜","ðŸ˜†","ðŸ˜…","ðŸ˜‚","ðŸ¤£","ðŸ˜Š","ðŸ˜‡","ðŸ™‚","ðŸ™ƒ","ðŸ˜‰","ðŸ˜Œ","ðŸ˜","ðŸ¥°","ðŸ˜˜","ðŸ˜—","ðŸ˜™","ðŸ˜š","ðŸ˜‹","ðŸ˜œ","ðŸ˜","ðŸ˜›","ðŸ¤‘","ðŸ¤—","ðŸ¤©","ðŸ¤”","ðŸ¤¨","ðŸ˜","ðŸ˜‘","ðŸ˜¶","ðŸ™„","ðŸ˜","ðŸ˜£","ðŸ˜¥","ðŸ˜®","ðŸ¤","ðŸ˜¯","ðŸ˜ª","ðŸ˜«","ðŸ¥±","ðŸ˜´","ðŸ˜Œ","ðŸ˜›","ðŸ˜œ","ðŸ˜","ðŸ¤¤","ðŸ˜’","ðŸ˜“","ðŸ˜”","ðŸ˜•","ðŸ™ƒ","ðŸ¤‘","ðŸ˜²","â˜¹ï¸","ðŸ™","ðŸ˜–","ðŸ˜ž","ðŸ˜Ÿ","ðŸ˜¤","ðŸ˜¢","ðŸ˜­","ðŸ˜¦","ðŸ˜§","ðŸ˜¨","ðŸ˜©","ðŸ¤¯","ðŸ˜¬","ðŸ˜°","ðŸ˜±","ðŸ¥µ","ðŸ¥¶","ðŸ˜³","ðŸ¤ª","ðŸ˜µ","ðŸ˜¡","ðŸ˜ ","ðŸ¤¬","ðŸ˜·","ðŸ¤’","ðŸ¤•","ðŸ¤¢","ðŸ¤®","ðŸ¥´","ðŸ˜‡","ðŸ¥³","ðŸ¥º","ðŸ¤ ","ðŸ˜Ž","ðŸ¤“","ðŸ§","ðŸ˜•","ðŸ¤‘","ðŸ¤¡","ðŸ¤¥","ðŸ¤«","ðŸ¤­","ðŸ«¢","ðŸ«£","ðŸ«¡","ðŸ¤—","ðŸ¤”","ðŸ¤­","ðŸ¤«","ðŸ¤¥","ðŸ« ","ðŸ«¨","ðŸ«¤","ðŸ«¦","ðŸ‘","ðŸ‘Ž","ðŸ‘","ðŸ™Œ","ðŸ™","ðŸ’ª","ðŸ‘€","ðŸ‘‹","ðŸ¤™","ðŸ’¯","ðŸ”¥","âœ¨","ðŸŽ‰","ðŸŽŠ","â¤ï¸","ðŸ§¡","ðŸ’›","ðŸ’š","ðŸ’™","ðŸ’œ","ðŸ–¤","ðŸ¤","ðŸ¤Ž","ðŸ’”","ðŸ’•","ðŸ’ž","ðŸ’“","ðŸ’—","ðŸ’–","ðŸ’˜"],g=k(null),l=k(null),i=$=>{const m=$.target.files[0];if(g.value=m||null,m&&m.type.startsWith("image/")){const M=new FileReader;M.onload=B=>{l.value=B.target.result},M.readAsDataURL(m)}else l.value=null},d=()=>{g.value=null,l.value=null;const $=document.getElementById("message-file-input");$&&($.value="")},x=async()=>{var $;if(!(!r.value.trim()&&!g||!c.activeChannel&&!c.activeDirectMessage)){n.value=!0;try{const m=new FormData;m.append("content",r.value.trim()),c.activeChannel&&m.append("channel_id",c.activeChannel.id),c.activeDirectMessage&&m.append("receiver_id",c.activeDirectMessage.id),g.value&&m.append("file",g.value);const M=($=document.head.querySelector('meta[name="csrf-token"]'))==null?void 0:$.content,B={"Content-Type":"multipart/form-data"};M&&(B["X-CSRF-TOKEN"]=M);let j;c.activeDirectMessage?j=await A.post("/api/direct-messages",m,{headers:B}):j=await A.post("/messages",m,{headers:B}),b("messageSent",j.data),r.value="",d()}catch(m){console.error("Message sending failed:",m)}finally{n.value=!1}}},U=$=>{$.key==="Enter"&&!$.shiftKey&&($.preventDefault(),x())},O=$=>{const m=document.activeElement;if(m&&m.selectionStart!==void 0){const M=m.selectionStart,B=m.selectionEnd;r.value=r.value.substring(0,M)+$+r.value.substring(B),setTimeout(()=>{m.selectionStart=m.selectionEnd=M+$.length,m.focus()},0)}else r.value+=$;h.value=!1},V=$=>{h.value&&!$.target.closest(".emoji-picker-popover")&&!$.target.closest(".emoji-picker-toggle")&&(h.value=!1)};return typeof window<"u"&&window.addEventListener("click",V),($,m)=>(s(),a("div",tt,[e("div",st,[e("div",at,[N(e("textarea",{"onUpdate:modelValue":m[0]||(m[0]=M=>r.value=M),onKeypress:U,class:"w-full border-none focus:ring-0 resize-none bg-transparent text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400",placeholder:"ãƒ¡ãƒ¢ã‚’æ›¸ã",rows:"1",disabled:n.value},null,40,rt),[[Q,r.value]]),l.value?(s(),a("div",ot,[e("img",{src:l.value,alt:"preview",class:"max-h-32 rounded border"},null,8,nt)])):g.value&&g.value.name?(s(),a("div",lt,[e("span",it,p(g.value.name),1)])):w("",!0),g.value?(s(),a("button",{key:2,onClick:d,class:"text-xs text-red-500 ml-2"},"ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤")):w("",!0),h.value?(s(),a("div",ct,[(s(),a(Z,null,H(C,M=>e("button",{key:M,class:"text-2xl p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",onClick:X(B=>O(M),["stop"]),type:"button"},p(M),9,dt)),64))])):w("",!0)]),e("div",ut,[e("div",ht,[e("label",vt,[y(u(fe),{class:"h-6 w-6"}),e("input",{id:"message-file-input",type:"file",class:"hidden",accept:"image/*,.pdf,.doc,.docx,.xls,.xlsx",onChange:i},null,32)]),e("button",gt,[y(u(ye),{class:"h-6 w-6"})]),e("button",mt,[y(u(ge),{class:"h-6 w-6"})])]),e("div",ft,[e("button",{class:"emoji-picker-toggle text-gray-500 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-300",onClick:m[1]||(m[1]=X(M=>h.value=!h.value,["stop"])),title:"çµµæ–‡å­—ã‚’æŒ¿å…¥",type:"button"},[y(u(he),{class:"h-6 w-6"})]),e("button",pt,[y(u(ce),{class:"h-6 w-6"})]),e("button",{onClick:x,disabled:!r.value.trim()&&!g.value||n.value,class:"bg-gray-800 text-white rounded p-1 hover:bg-gray-700 disabled:bg-gray-400 disabled:cursor-not-allowed",type:"button"},[y(u(me),{class:"h-5 w-5"})],8,yt)])])])]))}},kt={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},_t={class:"bg-white rounded-lg p-6 w-full max-w-md mx-4"},wt={class:"flex items-center justify-between mb-4"},bt={class:"mb-4"},$t=["disabled"],Ct={key:0,class:"mt-2 text-red-600 text-sm"},Mt={class:"flex justify-end space-x-3"},Dt=["disabled"],jt=["disabled"],St={__name:"MessageEditModal",props:{show:Boolean,message:Object,activeDirectMessage:Object},emits:["close","messageUpdated"],setup(o,{emit:v}){const c=o,b=v,r=k(""),n=k(!1),h=k("");P(()=>c.message,i=>{i&&(r.value=i.content,h.value="")},{immediate:!0});const C=async()=>{var i,d;if(!(!r.value.trim()||!c.message)){n.value=!0,h.value="";try{let x;c.activeDirectMessage?x=await A.put(`/api/direct-messages/${c.message.id}`,{content:r.value.trim()}):x=await A.put(`/messages/${c.message.id}`,{content:r.value.trim()}),b("messageUpdated",x.data),b("close")}catch(x){console.error("Message update failed:",x),(d=(i=x.response)==null?void 0:i.data)!=null&&d.message?h.value=x.response.data.message:h.value="ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸ"}finally{n.value=!1}}},g=()=>{var i;r.value=((i=c.message)==null?void 0:i.content)||"",h.value="",b("close")},l=i=>{i.key==="Enter"&&!i.shiftKey&&(i.preventDefault(),C())};return(i,d)=>o.show?(s(),a("div",kt,[e("div",_t,[e("div",wt,[d[1]||(d[1]=e("h3",{class:"text-lg font-semibold"},"ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç·¨é›†",-1)),e("button",{onClick:g,class:"text-gray-500 hover:text-gray-700"},[y(u(ae),{class:"h-6 w-6"})])]),e("div",bt,[N(e("textarea",{"onUpdate:modelValue":d[0]||(d[0]=x=>r.value=x),onKeypress:l,class:"w-full border border-gray-300 rounded-lg p-3 focus:ring-blue-500 focus:border-blue-500 resize-none",placeholder:"ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„",rows:"4",disabled:n.value},null,40,$t),[[Q,r.value]]),h.value?(s(),a("div",Ct,p(h.value),1)):w("",!0)]),e("div",Mt,[e("button",{onClick:g,class:"px-4 py-2 text-gray-600 hover:text-gray-800",disabled:n.value}," ã‚­ãƒ£ãƒ³ã‚»ãƒ« ",8,Dt),e("button",{onClick:C,disabled:!r.value.trim()||n.value,class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center space-x-2"},[y(u(z),{class:"h-4 w-4"}),e("span",null,p(n.value?"æ›´æ–°ä¸­...":"æ›´æ–°"),1)],8,jt)])])])):w("",!0)}},Lt={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Bt={class:"bg-white rounded-lg p-6 w-full max-w-md mx-4"},Et={class:"flex items-center justify-between mb-4"},At={class:"mb-4 text-gray-700"},Tt={class:"mt-2 p-2 bg-gray-100 rounded text-gray-800"},Ut={key:0,class:"mt-2 text-red-600 text-sm"},Ot={class:"flex justify-end space-x-3"},Vt=["disabled"],Ft=["disabled"],zt={__name:"MessageDeleteModal",props:{show:Boolean,message:Object,activeDirectMessage:Object},emits:["close","messageDeleted"],setup(o,{emit:v}){const c=o,b=v,r=k(!1),n=k(""),h=async()=>{var g,l;if(c.message){r.value=!0,n.value="";try{c.activeDirectMessage?await A.delete(`/api/direct-messages/${c.message.id}`):await A.delete(`/messages/${c.message.id}`),b("messageDeleted",c.message.id),b("close")}catch(i){n.value=((l=(g=i.response)==null?void 0:g.data)==null?void 0:l.message)||"å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ"}finally{r.value=!1}}},C=()=>{n.value="",b("close")};return(g,l)=>{var i;return o.show?(s(),a("div",Lt,[e("div",Bt,[e("div",Et,[l[0]||(l[0]=e("h3",{class:"text-lg font-semibold"},"ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å‰Šé™¤",-1)),e("button",{onClick:C,class:"text-gray-500 hover:text-gray-700"},[y(u(ae),{class:"h-6 w-6"})])]),e("div",At,[l[1]||(l[1]=F(" æœ¬å½“ã«ã“ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ ")),e("div",Tt,p((i=o.message)==null?void 0:i.content),1),n.value?(s(),a("div",Ut,p(n.value),1)):w("",!0)]),e("div",Ot,[e("button",{onClick:C,class:"px-4 py-2 text-gray-600 hover:text-gray-800",disabled:r.value}," ã‚­ãƒ£ãƒ³ã‚»ãƒ« ",8,Vt),e("button",{onClick:h,disabled:r.value,class:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center space-x-2"},[y(u(pe),{class:"h-4 w-4"}),e("span",null,p(r.value?"å‰Šé™¤ä¸­...":"å‰Šé™¤"),1)],8,Ft)])])])):w("",!0)}}},Zt={class:"flex-1 flex flex-col bg-white dark:bg-gray-900"},Ht={class:"flex-1 p-6 overflow-y-auto"},Kt={class:"w-10 h-10 rounded bg-purple-400 mr-4 shrink-0"},Rt=["src"],It={class:"flex-1"},Pt={class:"flex items-center justify-between"},Wt={class:"font-bold text-gray-900 dark:text-gray-100"},Nt={class:"text-xs text-gray-500 dark:text-gray-400 font-normal ml-2"},Qt={class:"flex items-center space-x-2 opacity-0 group-hover:opacity-100 transition-opacity"},qt=["onClick"],Xt=["onClick"],Gt={class:"mt-1"},Jt={key:0},Yt={key:0,class:"mt-2"},es=["src","alt","onClick"],ts=["src","onClick"],ss=["src","onClick"],as=["src","onClick"],rs=["src","onClick"],os={key:5},ns=["href","download"],ls={class:"text-xs text-gray-400 ml-2"},is={class:"w-10 h-10 rounded bg-purple-400 mr-4 shrink-0"},cs=["src"],ds={class:"flex-1"},us={class:"flex items-center justify-between"},hs={class:"font-bold text-gray-900 dark:text-gray-100"},vs={class:"text-xs text-gray-500 dark:text-gray-400 font-normal ml-2"},gs={class:"flex items-center space-x-2 opacity-0 group-hover:opacity-100 transition-opacity"},ms=["onClick"],fs=["onClick"],ps={class:"mt-1"},ys={key:0},xs={key:0,class:"mt-2"},ks=["src","alt","onClick"],_s=["src","onClick"],ws=["src","onClick"],bs=["src","onClick"],$s=["src","onClick"],Cs={key:5},Ms=["href","download"],Ds={class:"text-xs text-gray-400 ml-2"},js={key:2,class:"text-center text-gray-400 mt-10"},Ss={key:0},Ls=["src","alt"],Bs=["src"],Es=["src"],As=["src"],Ts=["src"],Us={__name:"MainContent",props:{messages:{type:Array,default:()=>[]},activeChannel:Object,activeDirectMessage:Object},emits:["messageSent","messageUpdated","messageDeleted"],setup(o,{emit:v}){var E;const b=(E=se().props.auth)==null?void 0:E.user,r=o,n=v,h=k([...r.messages||[]]),C=k(!1),g=k(null),l=k(!1),i=k(null),d=k(null),x=k(!1);P(()=>r.messages,f=>{h.value=[...f||[]]},{deep:!0});const U=f=>{h.value.unshift(f),n("messageSent",f)},O=f=>{const S=h.value.findIndex(t=>t.id===f.id);S!==-1&&(h.value[S]=f),n("messageUpdated",f)},V=f=>{const S=h.value.findIndex(t=>t.id===f);S!==-1&&h.value.splice(S,1),n("messageDeleted",f)},$=f=>{g.value=f,C.value=!0},m=()=>{C.value=!1,g.value=null},M=f=>{i.value=f,l.value=!0},B=()=>{l.value=!1,i.value=null},j=f=>{d.value=f,x.value=!0},D=()=>{x.value=!1,d.value=null},_=f=>b&&f.user.id===b.id;return(f,S)=>(s(),a("div",Zt,[y(et,{"active-channel":o.activeChannel,"active-direct-message":o.activeDirectMessage},null,8,["active-channel","active-direct-message"]),e("div",Ht,[o.activeChannel?(s(!0),a(Z,{key:0},H(h.value,t=>(s(),a("div",{key:t.id,class:"flex items-start mb-4 group hover:bg-gray-50 dark:hover:bg-gray-800 rounded-lg p-2 -m-2"},[e("div",Kt,[e("img",{src:t.user.avatar,alt:"avatar",class:"w-8 h-8 rounded-full"},null,8,Rt)]),e("div",It,[e("div",Pt,[e("p",Wt,[F(p(t.user.name)+" ",1),e("span",Nt,p(t.time),1)]),e("div",Qt,[_(t)?(s(),a("button",{key:0,onClick:L=>$(t),class:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 p-1 rounded",title:"ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç·¨é›†"},[y(u(Y),{class:"h-4 w-4"})],8,qt)):w("",!0),_(t)?(s(),a("button",{key:1,onClick:L=>M(t),class:"text-red-500 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 p-1 rounded",title:"ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å‰Šé™¤"},S[0]||(S[0]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-4 w-4"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,Xt)):w("",!0)])]),e("div",Gt,[t.content?(s(),a("span",Jt,p(t.content),1)):w("",!0)]),t.file_path?(s(),a("div",Yt,[t.file_mime&&t.file_mime.startsWith("image/")?(s(),a("img",{key:0,src:`/storage/${t.file_path}`,alt:t.file_name,class:"max-h-48 rounded border cursor-pointer hover:opacity-80 transition",onClick:L=>j({type:"image",src:`/storage/${t.file_path}`,name:t.file_name,mime:t.file_mime})},null,8,es)):t.file_mime&&t.file_mime.startsWith("video/")?(s(),a("video",{key:1,src:`/storage/${t.file_path}`,controls:"",class:"max-h-48 rounded border cursor-pointer hover:opacity-80 transition",onClick:L=>j({type:"video",src:`/storage/${t.file_path}`,name:t.file_name,mime:t.file_mime})},null,8,ts)):t.file_mime&&t.file_mime.startsWith("audio/")?(s(),a("audio",{key:2,src:`/storage/${t.file_path}`,controls:"",class:"w-full cursor-pointer hover:opacity-80 transition",onClick:L=>j({type:"audio",src:`/storage/${t.file_path}`,name:t.file_name,mime:t.file_mime})},null,8,ss)):t.file_mime==="application/pdf"?(s(),a("iframe",{key:3,src:`/storage/${t.file_path}`,class:"w-full max-h-96 border rounded cursor-pointer hover:opacity-80 transition",onClick:L=>j({type:"pdf",src:`/storage/${t.file_path}`,name:t.file_name,mime:t.file_mime})},null,8,as)):["application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"].includes(t.file_mime)?(s(),a("iframe",{key:4,src:`https://docs.google.com/gview?url=${f.location.origin}/storage/${t.file_path}&embedded=true`,class:"w-full max-h-96 border rounded cursor-pointer hover:opacity-80 transition",onClick:L=>j({type:"doc",src:`https://docs.google.com/gview?url=${f.location.origin}/storage/${t.file_path}&embedded=true`,name:t.file_name,mime:t.file_mime})},null,8,rs)):(s(),a("div",os,[e("a",{href:`/storage/${t.file_path}`,download:t.file_name,class:"text-blue-600 underline",target:"_blank"},p(t.file_name),9,ns),e("span",ls,"("+p((t.file_size/1024).toFixed(1))+" KB)",1)]))])):w("",!0)])]))),128)):o.activeDirectMessage?(s(!0),a(Z,{key:1},H(h.value,t=>(s(),a("div",{key:t.id,class:"flex items-start mb-4 group hover:bg-gray-50 dark:hover:bg-gray-800 rounded-lg p-2 -m-2"},[e("div",is,[e("img",{src:t.user.avatar,alt:"avatar",class:"w-8 h-8 rounded-full"},null,8,cs)]),e("div",ds,[e("div",us,[e("p",hs,[F(p(t.user.name)+" ",1),e("span",vs,p(t.time),1)]),e("div",gs,[_(t)?(s(),a("button",{key:0,onClick:L=>$(t),class:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 p-1 rounded",title:"ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç·¨é›†"},[y(u(Y),{class:"h-4 w-4"})],8,ms)):w("",!0),_(t)?(s(),a("button",{key:1,onClick:L=>M(t),class:"text-red-500 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 p-1 rounded",title:"ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å‰Šé™¤"},S[1]||(S[1]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-4 w-4"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,fs)):w("",!0)])]),e("div",ps,[t.content?(s(),a("span",ys,p(t.content),1)):w("",!0)]),t.file_path?(s(),a("div",xs,[t.file_mime&&t.file_mime.startsWith("image/")?(s(),a("img",{key:0,src:`/storage/${t.file_path}`,alt:t.file_name,class:"max-h-48 rounded border cursor-pointer hover:opacity-80 transition",onClick:L=>j({type:"image",src:`/storage/${t.file_path}`,name:t.file_name,mime:t.file_mime})},null,8,ks)):t.file_mime&&t.file_mime.startsWith("video/")?(s(),a("video",{key:1,src:`/storage/${t.file_path}`,controls:"",class:"max-h-48 rounded border cursor-pointer hover:opacity-80 transition",onClick:L=>j({type:"video",src:`/storage/${t.file_path}`,name:t.file_name,mime:t.file_mime})},null,8,_s)):t.file_mime&&t.file_mime.startsWith("audio/")?(s(),a("audio",{key:2,src:`/storage/${t.file_path}`,controls:"",class:"w-full cursor-pointer hover:opacity-80 transition",onClick:L=>j({type:"audio",src:`/storage/${t.file_path}`,name:t.file_name,mime:t.file_mime})},null,8,ws)):t.file_mime==="application/pdf"?(s(),a("iframe",{key:3,src:`/storage/${t.file_path}`,class:"w-full max-h-96 border rounded cursor-pointer hover:opacity-80 transition",onClick:L=>j({type:"pdf",src:`/storage/${t.file_path}`,name:t.file_name,mime:t.file_mime})},null,8,bs)):["application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"].includes(t.file_mime)?(s(),a("iframe",{key:4,src:`https://docs.google.com/gview?url=${f.location.origin}/storage/${t.file_path}&embedded=true`,class:"w-full max-h-96 border rounded cursor-pointer hover:opacity-80 transition",onClick:L=>j({type:"doc",src:`https://docs.google.com/gview?url=${f.location.origin}/storage/${t.file_path}&embedded=true`,name:t.file_name,mime:t.file_mime})},null,8,$s)):(s(),a("div",Cs,[e("a",{href:`/storage/${t.file_path}`,download:t.file_name,class:"text-blue-600 underline",target:"_blank"},p(t.file_name),9,Ms),e("span",Ds,"("+p((t.file_size/1024).toFixed(1))+" KB)",1)]))])):w("",!0)])]))),128)):(s(),a("div",js,"ãƒãƒ£ãƒ³ãƒãƒ«ã¾ãŸã¯ãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é¸æŠžã—ã¦ãã ã•ã„"))]),o.activeChannel||o.activeDirectMessage?(s(),T(xt,{key:0,"active-channel":o.activeChannel,"active-direct-message":o.activeDirectMessage,onMessageSent:U},null,8,["active-channel","active-direct-message"])):w("",!0),y(St,{show:C.value,message:g.value,"active-direct-message":o.activeDirectMessage,onClose:m,onMessageUpdated:O},null,8,["show","message","active-direct-message"]),y(zt,{show:l.value,message:i.value,"active-direct-message":o.activeDirectMessage,onClose:B,onMessageDeleted:V},null,8,["show","message","active-direct-message"]),y(ie,{show:x.value,"max-width":"4xl",onClose:D},{title:R(()=>{var t;return[F(p((t=d.value)==null?void 0:t.name),1)]}),content:R(()=>[d.value?(s(),a("div",Ss,[d.value.type==="image"?(s(),a("img",{key:0,src:d.value.src,alt:d.value.name,class:"max-h-[70vh] mx-auto rounded border"},null,8,Ls)):d.value.type==="video"?(s(),a("video",{key:1,src:d.value.src,controls:"",class:"max-h-[70vh] mx-auto rounded border"},null,8,Bs)):d.value.type==="audio"?(s(),a("audio",{key:2,src:d.value.src,controls:"",class:"w-full mx-auto"},null,8,Es)):d.value.type==="pdf"?(s(),a("iframe",{key:3,src:d.value.src,class:"w-full min-h-[60vh] border rounded"},null,8,As)):d.value.type==="doc"?(s(),a("iframe",{key:4,src:d.value.src,class:"w-full min-h-[60vh] border rounded"},null,8,Ts)):w("",!0)])):w("",!0)]),footer:R(()=>[e("button",{onClick:D,class:"px-4 py-2 bg-gray-700 text-white rounded hover:bg-gray-600"},"é–‰ã˜ã‚‹")]),_:1},8,["show"])]))}},Os={class:"flex h-screen bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-gray-200"},Vs={class:"flex-1 flex flex-col"},Ks={__name:"AppLayout",props:{title:String,channels:Array,"direct-messages":Array,messages:Array,activeChannel:Object,manualOffline:Boolean},emits:["selectChannel","newChannelAdded","messageSent","messageUpdated","messageDeleted","toggleManualOffline","channelDeleted","channelLeft","selectDirectMessage","directMessageStarted"],setup(o,{emit:v}){const c=v;return(b,r)=>(s(),a("div",null,[y(u(re),{title:o.title},null,8,["title"]),e("div",Os,[y(oe),y(le,{channels:o.channels,"direct-messages":b.direct-o.messages,"manual-offline":o.manualOffline,onToggleManualOffline:r[0]||(r[0]=n=>c("toggleManualOffline",n)),onSelectChannel:r[1]||(r[1]=n=>c("selectChannel",n)),onNewChannelAdded:r[2]||(r[2]=n=>c("newChannelAdded",n)),onChannelDeleted:r[3]||(r[3]=n=>c("channelDeleted",n)),onChannelLeft:r[4]||(r[4]=n=>c("channelLeft",n)),onSelectDirectMessage:r[5]||(r[5]=n=>c("selectDirectMessage",n)),onDirectMessageStarted:r[6]||(r[6]=n=>c("directMessageStarted",n))},null,8,["channels","direct-messages","manual-offline"]),e("div",Vs,[G(b.$slots,"notifications"),G(b.$slots,"default"),o.messages&&o.messages.length>0?(s(),T(Us,{key:0,messages:o.messages,"active-channel":o.activeChannel,onMessageSent:r[7]||(r[7]=n=>c("messageSent",n)),onMessageUpdated:r[8]||(r[8]=n=>c("messageUpdated",n)),onMessageDeleted:r[9]||(r[9]=n=>c("messageDeleted",n))},null,8,["messages","active-channel"])):w("",!0)])])]))}};export{Ks as _};
