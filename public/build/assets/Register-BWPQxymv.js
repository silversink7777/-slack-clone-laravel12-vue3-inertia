import{x as h,d as y,q as x,e as u,o as c,b as o,u as t,p as b,w as n,f as _,a,t as g,j as k,g as f,S as V,n as P,F as $}from"./app-4ff8IVuw.js";import{A as q}from"./AuthenticationCard-Dv-tkfGT.js";import{_ as S}from"./AuthenticationCardLogo-DPfbFOIt.js";import{_ as U}from"./Checkbox-SDoeerSD.js";import{_ as p,a as l}from"./TextInput-9md7id3W.js";import{_ as m}from"./InputLabel-CcbkInJd.js";import{_ as j}from"./PrimaryButton-BGb5YSlu.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const C={key:0,class:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg"},F={class:"flex items-center"},I={class:"ml-3"},N={class:"text-sm font-medium text-blue-800"},A={class:"text-sm text-blue-600"},R={class:"mt-4"},B={key:0,class:"mt-1 text-sm text-gray-500"},T={class:"mt-4"},E={class:"mt-4"},M={key:0,class:"mt-4"},z={class:"flex items-center"},D={class:"ms-2"},L=["href"],G=["href"],H={class:"flex items-center justify-end mt-4"},se={__name:"Register",setup(J){const s=h({name:"",email:"",password:"",password_confirmation:"",terms:!1,invitation_id:""}),d=y(null);x(()=>{const i=new URLSearchParams(window.location.search),e=i.get("invitation"),r=i.get("email");e&&(s.invitation_id=e,v(e)),r&&(s.email=r)});const v=async i=>{try{const e=await fetch(`/api/invitations/${i}/info`);if(e.ok){const r=await e.json();d.value=r}}catch(e){console.error("Failed to fetch invitation info:",e)}},w=()=>{s.post(route("register"),{onFinish:()=>s.reset("password","password_confirmation")})};return(i,e)=>(c(),u($,null,[o(t(b),{title:"Register"}),o(q,null,{logo:n(()=>[o(S)]),default:n(()=>[d.value?(c(),u("div",C,[a("div",F,[e[5]||(e[5]=a("div",{class:"flex-shrink-0"},[a("div",{class:"h-8 w-8 rounded-full bg-blue-100 flex items-center justify-center"},[a("span",{class:"text-blue-600 text-sm font-medium"},"📺")])],-1)),a("div",I,[a("h3",N,g(d.value.channel.name)+" チャンネルへの招待 ",1),a("p",A," 招待者: "+g(d.value.inviter.name),1)])])])):_("",!0),a("form",{onSubmit:k(w,["prevent"])},[a("div",null,[o(m,{for:"name",value:"Name"}),o(p,{id:"name",modelValue:t(s).name,"onUpdate:modelValue":e[0]||(e[0]=r=>t(s).name=r),type:"text",class:"mt-1 block w-full",required:"",autofocus:"",autocomplete:"name"},null,8,["modelValue"]),o(l,{class:"mt-2",message:t(s).errors.name},null,8,["message"])]),a("div",R,[o(m,{for:"email",value:"Email"}),o(p,{id:"email",modelValue:t(s).email,"onUpdate:modelValue":e[1]||(e[1]=r=>t(s).email=r),type:"email",class:"mt-1 block w-full",required:"",autocomplete:"username",readonly:!!t(s).invitation_id},null,8,["modelValue","readonly"]),o(l,{class:"mt-2",message:t(s).errors.email},null,8,["message"]),t(s).invitation_id?(c(),u("p",B," 招待メールで指定されたメールアドレスです ")):_("",!0)]),a("div",T,[o(m,{for:"password",value:"Password"}),o(p,{id:"password",modelValue:t(s).password,"onUpdate:modelValue":e[2]||(e[2]=r=>t(s).password=r),type:"password",class:"mt-1 block w-full",required:"",autocomplete:"new-password"},null,8,["modelValue"]),o(l,{class:"mt-2",message:t(s).errors.password},null,8,["message"])]),a("div",E,[o(m,{for:"password_confirmation",value:"Confirm Password"}),o(p,{id:"password_confirmation",modelValue:t(s).password_confirmation,"onUpdate:modelValue":e[3]||(e[3]=r=>t(s).password_confirmation=r),type:"password",class:"mt-1 block w-full",required:"",autocomplete:"new-password"},null,8,["modelValue"]),o(l,{class:"mt-2",message:t(s).errors.password_confirmation},null,8,["message"])]),i.$page.props.jetstream.hasTermsAndPrivacyPolicyFeature?(c(),u("div",M,[o(m,{for:"terms"},{default:n(()=>[a("div",z,[o(U,{id:"terms",checked:t(s).terms,"onUpdate:checked":e[4]||(e[4]=r=>t(s).terms=r),name:"terms",required:""},null,8,["checked"]),a("div",D,[e[6]||(e[6]=f(" I agree to the ")),a("a",{target:"_blank",href:i.route("terms.show"),class:"underline text-sm text-gray-600 hover:text-gray-900 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},"Terms of Service",8,L),e[7]||(e[7]=f(" and ")),a("a",{target:"_blank",href:i.route("policy.show"),class:"underline text-sm text-gray-600 hover:text-gray-900 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},"Privacy Policy",8,G)])]),o(l,{class:"mt-2",message:t(s).errors.terms},null,8,["message"])]),_:1})])):_("",!0),a("div",H,[o(t(V),{href:i.route("login"),class:"underline text-sm text-gray-600 hover:text-gray-900 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},{default:n(()=>e[8]||(e[8]=[f(" Already registered? ")])),_:1,__:[8]},8,["href"]),o(j,{class:P(["ms-4",{"opacity-25":t(s).processing}]),disabled:t(s).processing},{default:n(()=>[f(g(t(s).invitation_id?"アカウントを作成してチャンネルに参加":"Register"),1)]),_:1},8,["class","disabled"])])],32)]),_:1})],64))}};export{se as default};
